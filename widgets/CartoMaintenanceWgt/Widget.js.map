{"version":3,"sources":["../../../widgets/CartoMaintenanceWgt/Widget.js"],"names":["declare","BaseWidget","_WidgetsInTemplateMixin","Draw","Edit","Graphic","SimpleFillSymbol","SimpleMarkerSymbol","SimpleLineSymbol","Color","GraphicsLayer","Point","LayerInfos","lang","FeatureLayer","QueryTask","Query","WidgetManager","geometryEngine","Polyline","Polygon","webMercatorUtils","Geoprocessor","BusyIndicator","Message","turf","XLSX","Deferred","TextSymbol","Font","CaseInfo","StatisticDefinition","esriRequest","SubDivision","Acumulation","Independence","Deactivate","LandAssignment","LandProcess","ToolDraw","UtilityCase","GeometryService","CustomException","LengthsParameters","requestToAttendState","requestsObservedState","requestsAttendState","idLyrCatastroFiscal","idLyrCfPredios","idLyrCfLotesPun","idLyrCfEje_vial","idLyrCfNumeracion","idLyrCfArancel","idLyrCfLotes","idLyrCfUnidadesurbanas","idLyrCfParques","idLyrCfManzana","idLyrCfManzanaUrb","idLyrCfSector","idLyrDistricts","iconByState","_UBIGEO_FIELD","_ID_LOTE_P_FIELD","_COD_MZN_FIELD","_F_MZN_FIELD","_COD_SECT_FIELD","_COD_PRE_FIELD","_COD_LOTE_FIELD","toolbarCm","params","URLSearchParams","window","location","search","paramsApp","keys","key","get","symbolPuntoLote","STYLE_SQUARE","STYLE_SOLID","symbolFusionLote","symbolEliminarLote","STYLE_DIAGONAL_CROSS","symbolLoteSelected","symbolDivisionLote","STYLE_DASH","symbolPredio","symbolPredioSelected","symbolPredioSelected2","symbolSnapPointCm","STYLE_CROSS","idGraphicPredioCm","idGraphicPredioByDivison","idGraphicPredioSelectedCm","idGraphicLoteCm","idGraphicLoteSelectedCm","idGraphicPuntoLote","idGraphicFrenteLote","idGraphicLineaDivision","idGraphicLoteDeleteCm","idGraphicLabelLineaDivision","idGraphicLabelCodLote","symbolByCase","graphicLayerLineaDivision","id","graphicLayerLabelLineaDivision","graphicLayerPredioByDivison","fontAwesome","document","createElement","src","head","appendChild","baseClass","codRequestsCm","currentTabActive","layersMap","queryUbigeo","case","caseDescription","lotesQuery","idlotes","arancel","codigosPredios","xy","idxLines","cpmPredioDivision","idPredioDivision","cpmAcumulacion","idAcumulacion","editToolbar","idButtonDrawActive","queryRequests","ubigeo","limit","offset","ordering","defaultOffset","currentCount","responseRequests","currentLotsRows","currentLandRows","currentPoinLotsRows","resolutionType","resolutionDocument","floor","urbanLotNumber","limitAnother","postCreate","inherited","arguments","_createToolbar","_setInitAppCm","geometryService","config","geometryServiceUrl","selfCm","esri","bundle","toolbars","draw","addPoint","addShape","resume","start","_getAllLayers","deferred","getInstance","map","itemInfo","then","hitch","layerInfosObj","resolve","catch","reject","err","promise","response","_filterByDistrictCm","_startExtentByDistrictCm","_setToolbarDraw","_showMessage","message","type","lotFeatureLayer","getLayer","anotherToolbar","initToolDraw","controlMeasurementRealTime","measurementLabelApCm","controlMeasurementTable","bodyTbMeasurementApCm","linearDivision","callbackAddLineDivision","_divisorLine","dojo","query","on","activateToolDraw","bind","title","nls","widgetTitle","titleLabel","_showMessagePromise","messagetext","buttons","label","onClick","hide","_showMessageConfirm","mensaje","quesstionContinue","queryPredios","getLayerInfoById","getFilter","setFilter","where","qTask","getUrl","executeForExtent","setExtent","results","extent","homeWidget","getWidgetsByName","homeDijit","startup","busyIndicator","create","target","domNode","parentNode","backgroundOpacity","_callApiRestServices","baseUrl","url","URL","Object","forEach","searchParams","append","fetch","ok","Error","status","json","console","log","_getRequestsTrayDataCm","responseData","state","data","filter","i","_loadIniRequestsCm","click","_parseDateStringtoFormat","dateString","date","Date","day","getDate","month","getMonth","year","getFullYear","_loadRequestTabActiveCm","evt","currentElementActive","idStatus","_loadRequestsCm","show","applicationListUrl","dataHtml","lands","lnd","join","idType","icon","tbody","innerHTML","tb","getElementsByTagName","length","tableRequestApCm","removeChild","_openFormCase","_openFormResult","removeClass","classList","add","_controlLabelPagination","_changeLimitPagination","parseInt","value","_nextPagePagination","_prevPagePagination","ini","disabled","end","_zoomToPredSelectedEvt","cup","currentTarget","dataset","_zoomToPredSelected","_handleFeatureSelected","feature","featureSelected","setSymbol","addLayer","centerAt","geometry","setTimeout","_removeLayerGraphic","LandCls","Land","prediosLayer","propertyLayer","mode","MODE_ONDEMAND","outFields","codCpu","estado","selectFeatures","SELECTION_NEW","emptyLandSelected","error","_openSupportingDocument","emptyDocSupport","open","focus","executeQueryTask","Promise","execute","_getLandsOriginals","self","LotCls","Lot","queryLands","cpuOriginal","currentLandTabRows","ubigeoFieldName","returnGeometry","urlLands","features","errorGetLand","idLots","attributes","idLotP","_getLotsOriginals","queryLots","urlLots","emptyLotRequests","codMznValues","codSectValues","_getPointLotsOriginals","queryPointLots","urlPointLots","emptyPointLotRequests","_getLandsOriginalsTab","idSolicitud","urlOriginal","landsByApplicationUrl","count","_getOriginalData","_zoomExtentToLote","errorAcumulationLandsNumber","unionPredios","_unionFeatures","getExtent","expand","_zoomHomeRequests","_toggleBodyCaseInfo","closest","querySelector","toggle","_requestCaseInfo","urlResults","resultsByApplication","urlDocSupport","urlAffectedLands","affectedLands","all","_","responseResults","responseDocSupport","responseAffectedLands","rows","idx","contentCard","active","empyLandResultsRequests","support","rowsAffected","addClass","rowsResults","uniqueCodeLands","reasignarApCm","fusionApCm","divisionApCm","containerToolDrawApCm","eliminacionApCm","independenceApCm","pointLots","landsSymbol","landsSymbolSelected","removeAllGraphics","renderTableLandAssignment","renderButtonProcess","_executeIndependenceLands","selectedPointLots","highlightLand","reestartSymbolLand","resultCtnApCm","remove","obsCtnApCm","requestTrayApCm","casesCtnApCm","row","rowList","td","deactivate","disableSnapping","bodyTbLinesDvApCm","bodyTbPrediosDvApCm","bodyTbDatosLoteDvApCm","removeAllGraphicsIntoMeasurements","clear","_removeClassActiveButton","_openFormObs","textAreaObsApCm","imageDiv","imgUploadApCm","style","backgroundImage","_FormResult","id_solicitud","caseCm","urlPredioResults","nameCase","resultDeactivate","bodyTbResultsApCm","predio","index","_centerAtPredioResult","replace","_refreshLayersCF","setVisibility","_addToMap","screenPoint","toScreen","snappingManager","getSnappingPoint","undefined","point_g","webMercatorToGeographic","graphic","symbol","graphicLayer","x","y","cpm","setInfoWindowOnClick","errorSnapingLocate","nameIdLine","polylineGeomUtm","vertices","paths","lastTwoCoords","slice","line","lineString","bearing","point","coordinates","options","units","addDistance","destintation","destination","vertices2","reverse","lastTwoCoords2","line2","bearing2","point2","destintation2","unshift","polyline","spatialReference","geographicToWebMercator","_populateTableDrawLine","_addNameToLine","layerId","graphicsLayerIds","includes","removeLayer","_activateTool","_activateSnappingByReasignar","activate","_activateToolAcumulacion","resolutiontype","resolutiondocument","urbanlotnumber","parentElement","split","_activateSnappingByAcumulacion","_activateToolLinesDivision","deactivateToolbarAnotherToolbar","_activateSnappingByDivision","cflayer","snapManager","enableSnapping","snapPointSymbol","tolerance","layerInfos","layer","setLayerInfos","graphicLayerPuntoLote","graphicsLayerInfo","layers","LayerInfo","name","alwaysSnap","arr","union","_unionFeaturesAcumulation","topology","graphicLayerLoteFusion","rings","_extent","_ApplyAcumulationLotsRefactor","_getOriginalLots","geomLoteAcumulation","_getMaxCodLot","_ordenarPoligonosNorteSur","proprsLot","polygons","maxCodLote","bodyTbDatosLoteFsApCm","_addGraphicsPointLotsAndArancel","_populateTablePredio","bodyTbPrediosFsApCm","_getMidpoint","geodesicLength","midpoint","geodesicDensify","getPoint","_findMidpoint","lengthPolylineChunk","along","_getLongestPolyline","longestPath","path","polylineChunk","wkid","_dividePolygon","poly","lines","divide","cut","item","simplePolygon","push","idLine","tr","cursor","_deleteRowLine","_zoonToLineDivision","_editaNameLineDivision","elem","graphics","graphicLabel","polylineGeom","midPoint","pointLabel","font","STYLE_NORMAL","VARIANT_NORMAL","WEIGHT_BOLD","txtSym","setOffset","setAlign","ALIGN_END","setHaloColor","setHaloSize","text","innerText","refresh","bodyTable","drawFunction","_activateSnappingPrediosByDivision","graphiclayer","_activateToolPrediosByDivision","_changeValueCodLote","selectedValue","currentSelectId","lyr","graphicSelected","selects","select","graphicNotSelected","_changeLotUrb","lot_urb","_centerAtLabelCodLoteDivision","centerAndZoom","_editLoteUrbanoDivision","selectedOptions","_buildDataLoteTable","tableBody","predios","indexCell","className","textContent","num","codigoCell","optionDisabled","option","p","cod_lote","selected","loteUrbCell","loteUrbSelect","optionDisabledLotUrb","cloneNode","request","locationMarker","poligonos","coordenadasNorte","poligono","ymax","poligonosOrdenados","sort","a","b","coordenadaNorteA","indexOf","coordenadaNorteB","graphicLayerLabelCodLoteDivision","dataLoteTable","labelPoints","_zfill","setColor","setSize","idGraphic","clase","len","Array","fill","polygonos","estadisticaDef","statisticType","onStatisticField","outStatisticFieldName","outStatistics","queryTask","result","resultado","outSR","f","requestOptions","content","handleAs","callbackParamName","usePost","_getPolylinesDrawn","unionGraphicLayerLineaDivision","lineGeometry","_divideLotsByLines","errorLotQuery","polygonGeometry","geomLoteDivided","errorDivideLot","graphicLayerLoteDivision","lote","orderByFields","graphicLayerFrenteLote","graphicLoteDivision","frentes","isItc","intersects","hasOwnProperty","unionFrentes","idItcFrentesByLotes","itcFrentesByLotes","intersect","symbolFrenteLote","Math","random","frente","puntoLoteTurf","puntoLote","puntoLoteGraphic","_ApplyDivideLotesRefactor","emptyLineSubdivision","reorderLayer","_executeAcumulacionGpService","emptyPreviewAccumulation","emptyNewLand","labelCodLotesLayer","_addWarningMessageExecute","labelCodLotesLayerGraphic","codRequests","codLot","lotUrb","coords","newPointLotsGraphics","newLandsGraphics","landUrl","pointLotUrl","lotUrl","arancelUrl","blockUrl","cadastralBlockUrl","lotGraphic","user","caseRequest","queryBlock","executeAcumulation","_removeWarningMessageExecute","successProcess","ErrorEqualUrbanLotWithinBlock","_executeSubdivisionGpService","layerLote","emptyPreviewSubdivision","pred","emptyLotCodeSubdivision","emptyUrbanLotSubdivision","emptyGraphicLandSubdivision","checkLotsWithinLands","emptyLandResultSubdivision","lotUrbArray","duplicateLotUrban","checkDuplicateLotUrbanResults","duplicateLotUrbanResult","executeSubdivision","_executeInactivarGpService","codRequest","cpu","executeDeactivate","finally","buzyElm","imgElm","loadingText","position","topMessage","parseFloat","top","leftImg","left","width","transform","background","zIndex","warningExecute","checkPointLotsSelected","emptyWaySelectedIndependence","newLands","matrixLand","executeIndependence","_executeGPService","urlStatusRequest","gp","submitJob","_completeCallback","_statusCallback","JobInfo","jobId","textMessage","messages","description","jobStatus","getResultData","_sendDataToPlatform","_exportTableToExcel","table","headerRow","querySelectorAll","headers","headerCols","h","cols","j","wb","utils","book_new","ws","json_to_sheet","sheetName","book_append_sheet","writeFile","_dataURItoBlob","dataURI","byteString","atob","mimeString","buffer","ArrayBuffer","dataView","Uint8Array","charCodeAt","Blob","_sendObservation","file","files","messageObservation","trim","emptyObservation","emptyImageSupport","reader","FileReader","FormData","onloadend","observationUrl","method","body","successRequestObservation","errorProcessRequestObservation","readAsDataURL","_uploadImagenObs","backgroundSize","backgroundRepeat","backgroundPosition","_searchRequestByCodPred","keyCode","_sortedByDate","columnOrder","val","onOpen","info","isModified"],"mappings":"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","file":"Widget.js","sourcesContent":["import declare from 'dojo/_base/declare';\r\nimport BaseWidget from 'jimu/BaseWidget';\r\nimport _WidgetsInTemplateMixin from 'dijit/_WidgetsInTemplateMixin';\r\nimport Draw from \"esri/toolbars/draw\";\r\nimport Edit from \"esri/toolbars/edit\";\r\nimport Graphic from \"esri/graphic\";\r\nimport SimpleFillSymbol from \"esri/symbols/SimpleFillSymbol\";\r\nimport SimpleMarkerSymbol from \"esri/symbols/SimpleMarkerSymbol\";\r\nimport SimpleLineSymbol from \"esri/symbols/SimpleLineSymbol\";\r\nimport Color from 'dojo/_base/Color';\r\nimport GraphicsLayer from \"esri/layers/GraphicsLayer\"\r\nimport Point from \"esri/geometry/Point\"\r\nimport LayerInfos from \"jimu/LayerInfos/LayerInfos\";\r\nimport lang from \"dojo/_base/lang\";\r\nimport FeatureLayer from \"esri/layers/FeatureLayer\";\r\nimport QueryTask from \"esri/tasks/QueryTask\";\r\nimport Query from \"esri/tasks/query\";\r\nimport WidgetManager from \"jimu/WidgetManager\"\r\nimport geometryEngine from \"esri/geometry/geometryEngine\";\r\nimport Polyline from \"esri/geometry/Polyline\";\r\nimport Polygon from \"esri/geometry/Polygon\";\r\nimport webMercatorUtils from \"esri/geometry/webMercatorUtils\";\r\nimport Geoprocessor from \"esri/tasks/Geoprocessor\";\r\nimport BusyIndicator from 'esri/dijit/util/busyIndicator';\r\nimport Message from \"jimu/dijit/Message\";\r\nimport turf from \"https://unpkg.com/@turf/turf@6/turf.min.js\"\r\nimport XLSX from \"https://unpkg.com/xlsx@0.17.2/dist/xlsx.full.min.js\"\r\nimport Deferred from \"dojo/Deferred\";\r\nimport TextSymbol from \"esri/symbols/TextSymbol\";\r\nimport Font from \"esri/symbols/Font\";\r\nimport CaseInfo from './CaseInfo';\r\nimport StatisticDefinition from \"esri/tasks/StatisticDefinition\"\r\nimport esriRequest from \"esri/request\"\r\nimport SubDivision from './case/Subdivision';\r\nimport Acumulation from './case/Acumulation';\r\nimport Independence from './case/Independence';\r\nimport Deactivate from './case/Deactivate';\r\nimport LandAssignment from './components/LandAssignment';\r\nimport LandProcess from './components/LandProcess';\r\nimport ToolDraw from './components/ToolDraw';\r\n// import LandMatrix from './components/LandMatrix';\r\nimport UtilityCase from './case/UtilityCase';\r\nimport GeometryService from \"esri/tasks/GeometryService\";\r\nimport CustomException from './case/CustomException';\r\nimport LengthsParameters from \"esri/tasks/LengthsParameters\";\r\n\r\n\r\n\r\nconst requestToAttendState = \"por_atender\"\r\nconst requestsObservedState = \"observado\"\r\nconst requestsAttendState = \"atendido\"\r\n\r\n\r\n// Layers ids\r\nconst idLyrCatastroFiscal = \"CARTO_FISCAL_6806\"\r\nconst idLyrCfPredios = \"CARTO_FISCAL_8991\"\r\nconst idLyrCfLotesPun = \"CARTO_FISCAL_981\"\r\nconst idLyrCfEje_vial = \"CARTO_FISCAL_6806_2\"\r\nconst idLyrCfNumeracion = \"CARTO_FISCAL_6806_3\"\r\nconst idLyrCfArancel = \"CARTO_FISCAL_4232\"\r\nconst idLyrCfLotes = \"CARTO_FISCAL_2802\"\r\nconst idLyrCfUnidadesurbanas = \"CARTO_FISCAL_6806_6\"\r\nconst idLyrCfParques = \"CARTO_FISCAL_6806_7\"\r\nconst idLyrCfManzana = \"CARTO_FISCAL_6806_8\"\r\nconst idLyrCfManzanaUrb = \"CARTO_FISCAL_6806_9\"\r\nconst idLyrCfSector = \"CARTO_FISCAL_6806_10\"\r\n// const idLyrActpuntoimg = \"ACTUALIZACION_DE_PUNTO_IMG_1890\"\r\nconst idLyrDistricts = \"limites_nacional_1821_2\"\r\n\r\nconst iconByState = {\r\n  \"por_atender\": { 'icon': 'fas fa-pencil-alt', 'id': 'editRequestsCm', 'desc': \"Por atender\", 'idStatus': 1 },\r\n  \"observado\": { 'icon': 'fas fa-pause', 'id': 'obsRequestsCm', 'desc': \"Observado\", 'idStatus': 3 },\r\n  \"atendido\": { 'icon': 'fas fa-check', 'id': 'goodRequestsCm', 'desc': \"Atendido\", 'idStatus': 2 },\r\n}\r\n\r\n// Fields \r\nconst _UBIGEO_FIELD = \"UBIGEO\"\r\nconst _ID_LOTE_P_FIELD = \"ID_LOTE_P\"\r\nconst _COD_MZN_FIELD = \"COD_MZN\"\r\nconst _F_MZN_FIELD = \"F_MZN\"\r\nconst _COD_SECT_FIELD = \"COD_SECT\"\r\nconst _COD_PRE_FIELD = \"COD_PRE\"\r\nconst _COD_LOTE_FIELD = \"COD_LOTE\"\r\n\r\n\r\nlet toolbarCm\r\n\r\nconst params = new URLSearchParams(window.location.search)\r\nconst paramsApp = {}\r\n\r\nfor (let key of params.keys()) {\r\n  paramsApp[key] = params.get(key)\r\n}\r\n\r\n// Styles\r\nconst symbolPuntoLote = new SimpleMarkerSymbol(\r\n  SimpleMarkerSymbol.STYLE_SQUARE,\r\n  20,\r\n  new SimpleLineSymbol(\r\n    SimpleLineSymbol.STYLE_SOLID,\r\n    new Color([255, 0, 0]), 2),\r\n  new Color([0, 92, 230, 1]\r\n  )\r\n)\r\n\r\nconst symbolFusionLote = new SimpleFillSymbol(\r\n  SimpleFillSymbol.STYLE_SOLID,\r\n  new SimpleLineSymbol(\r\n    SimpleLineSymbol.STYLE_SOLID,\r\n    new Color([255, 0, 0]),\r\n    2\r\n  ),\r\n  new Color([255, 255, 0, 0.25])\r\n)\r\n\r\nconst symbolEliminarLote = new SimpleFillSymbol(\r\n  SimpleFillSymbol.STYLE_DIAGONAL_CROSS,\r\n  new SimpleLineSymbol(\r\n    SimpleLineSymbol.STYLE_SOLID,\r\n    new Color([100, 100, 100]),\r\n    2\r\n  ),\r\n  new Color([229, 229, 229, 0.9])\r\n)\r\n\r\nconst symbolLoteSelected = new SimpleFillSymbol(\r\n  SimpleFillSymbol.STYLE_SOLID,\r\n  new SimpleLineSymbol(\r\n    SimpleLineSymbol.STYLE_SOLID,\r\n    new Color([255, 0, 0, 0.75]),\r\n    4\r\n  ),\r\n  new Color([0, 255, 0, 0])\r\n)\r\n\r\nconst symbolDivisionLote = new SimpleLineSymbol(\r\n  SimpleLineSymbol.STYLE_DASH,\r\n  new Color([255, 0, 0]),\r\n  2\r\n)\r\n\r\nconst symbolPredio = new SimpleMarkerSymbol(\r\n  SimpleMarkerSymbol.STYLE_SQUARE,\r\n  20,\r\n  new SimpleLineSymbol(\r\n    SimpleLineSymbol.STYLE_SOLID,\r\n    new Color([255, 0, 0]), 2),\r\n  new Color([235, 69, 95, 1]\r\n  )\r\n)\r\n\r\nconst symbolPredioSelected = new SimpleMarkerSymbol(\r\n  SimpleMarkerSymbol.STYLE_SQUARE, 20,\r\n  new SimpleLineSymbol(SimpleLineSymbol.STYLE_SOLID,\r\n    new Color([255, 0, 0]), 4),\r\n  new Color([0, 255, 0, 0])\r\n);\r\n\r\nconst symbolPredioSelected2 = new SimpleMarkerSymbol(\r\n  SimpleMarkerSymbol.STYLE_SQUARE,\r\n  30,\r\n  new SimpleLineSymbol(\r\n    SimpleLineSymbol.STYLE_SOLID,\r\n    new Color([0, 183, 205]), 2),\r\n  new Color([0, 255, 255]\r\n  )\r\n);\r\n\r\nconst symbolSnapPointCm = new SimpleMarkerSymbol(\r\n  SimpleMarkerSymbol.STYLE_CROSS,\r\n  20,\r\n  new SimpleLineSymbol(\r\n    SimpleLineSymbol.STYLE_SOLID,\r\n    new Color([255, 0, 0]),\r\n    2\r\n  ),\r\n  new Color([0, 255, 0, 0.25])\r\n)\r\n\r\n\r\n// Identificadores de graficos\r\nconst idGraphicPredioCm = \"graphicPredioCm2\"\r\nconst idGraphicPredioByDivison = \"graphicPredioByDivison\"\r\n// const idGraphicLandsByIndependence = \"graphicLandsByIndependence\"\r\nconst idGraphicPredioSelectedCm = \"graphicPredioSelected\"\r\nconst idGraphicLoteCm = \"graphicLoteCm\"\r\nconst idGraphicLoteSelectedCm = \"graphicLoteSelectedCm\"\r\nconst idGraphicPuntoLote = \"graphicPuntoLote\"\r\nconst idGraphicFrenteLote = \"graphicFrenteLote\"\r\nconst idGraphicLineaDivision = \"graphicLineaDivision\"\r\nconst idGraphicLoteDeleteCm = \"graphicLoteDeleteCm\"\r\nconst idGraphicLabelLineaDivision = \"graphicLabelLineaDivision\"\r\nconst idGraphicLabelCodLote = \"graphicLabelCodLoteDivision\"\r\n\r\n// symbol by case\r\nconst symbolByCase = {\r\n  \"1\": { \"symbol\": symbolPredio },\r\n  \"2\": { \"symbol\": symbolPredio },\r\n  \"3\": { \"symbol\": symbolPredio },\r\n}\r\n\r\n// graphicsLayer main\r\nconst graphicLayerLineaDivision = new GraphicsLayer({\r\n  id: idGraphicLineaDivision,\r\n});\r\n\r\nconst graphicLayerLabelLineaDivision = new GraphicsLayer({\r\n  id: idGraphicLabelLineaDivision,\r\n});\r\n\r\n// let graphicLayerLabelCodLoteDivision = new GraphicsLayer({\r\n//   id: idGraphicLabelCodLote,\r\n// });\r\n\r\nconst graphicLayerPredioByDivison = new GraphicsLayer({\r\n  id: idGraphicPredioByDivison,\r\n});\r\n\r\n// const graphicLayerLandsByIndependence = new GraphicsLayer({\r\n//   id: idGraphicLandsByIndependence,\r\n// });\r\n\r\nconst fontAwesome = document.createElement('script');\r\nfontAwesome.src = 'https://use.fontawesome.com/releases/v5.3.1/js/all.js';\r\ndocument.head.appendChild(fontAwesome);\r\n\r\n// To create a widget, you need to derive from BaseWidget.\r\nexport default declare([BaseWidget], {\r\n\r\n  // Custom widget code goes here\r\n\r\n  baseClass: 'carto-maintenance-wgt',\r\n  codRequestsCm: null,\r\n  currentTabActive: requestToAttendState,\r\n  layersMap: [],\r\n  queryUbigeo: paramsApp['ubigeo'] ? `${_UBIGEO_FIELD} = '${paramsApp['ubigeo']}'` : \"1=1\",\r\n  case: 0,\r\n  caseDescription: '',\r\n  lotesQuery: null,\r\n  idlotes: null,\r\n  arancel: null,\r\n  codigosPredios: null,\r\n  xy: [],\r\n  idxLines: 0,\r\n  cpmPredioDivision: '',\r\n  idPredioDivision: '',\r\n  cpmAcumulacion: '',\r\n  idAcumulacion: '',\r\n  editToolbar: null,\r\n  idButtonDrawActive: '',\r\n  queryRequests: {\r\n    ubigeo: paramsApp['ubigeo'],\r\n    limit: 25,\r\n    offset: 0,\r\n    ordering: \"date\"\r\n  },\r\n  // defaultLimit: 25,\r\n  defaultOffset: 0,\r\n  currentCount: 0,\r\n  responseRequests: null,\r\n  currentLotsRows: null,\r\n  currentLandRows: null,\r\n  currentPoinLotsRows: null,\r\n\r\n  resolutionType: null,\r\n  resolutionDocument: null,\r\n  floor: null,\r\n  urbanLotNumber: null,\r\n  limitAnother: 10000,\r\n  // toolDraw: new ToolDraw(),\r\n\r\n  // ErrorEqualUrbanLotWithinBlock: new CustomException.ErrorEqualUrbanLotWithinBlock(),\r\n  // currentLotsRowsAsPolygons: null,\r\n\r\n  // add additional properties here\r\n\r\n  // methods to communication with app container:\r\n  postCreate() {\r\n    this.inherited(arguments);\r\n    // this._getAllLayers();\r\n    this._createToolbar();\r\n    this._setInitAppCm();\r\n    this.geometryService = new GeometryService(this.config.geometryServiceUrl);\r\n    selfCm = this;\r\n    // this._filterByDistrictCm();\r\n    // this._startExtentByDistrictCm();\r\n    // this._setToolbarDraw();\r\n    esri.bundle.toolbars.draw.addPoint = esri.bundle.toolbars.draw.addPoint + \"<br/>Pulsar <strong>CTRL</strong> para activar la alineación\";\r\n    esri.bundle.toolbars.draw.addShape = esri.bundle.toolbars.draw.addShape + \"<br/>Pulsar <strong>CTRL</strong> para activar la alineación\";\r\n    esri.bundle.toolbars.draw.resume = esri.bundle.toolbars.draw.resume + \"<br/>Pulsar <strong>CTRL</strong> para activar la alineación\";\r\n    esri.bundle.toolbars.draw.start = esri.bundle.toolbars.draw.start + \"<br/>Pulsar <strong>CTRL</strong> para activar la alineación\";\r\n  },\r\n  _getAllLayers() {\r\n    const deferred = new Deferred();\r\n    LayerInfos.getInstance(this.map, this.map.itemInfo)\r\n      .then(lang.hitch(this, function (layerInfosObj) {\r\n        // this.layersMap = layerInfosObj;\r\n        return deferred.resolve(layerInfosObj);\r\n      }))\r\n      .catch(err => deferred.reject(err));\r\n    return deferred.promise;\r\n  },\r\n\r\n  _setInitAppCm() {\r\n    return this._getAllLayers()\r\n      .then(response => {\r\n        this.layersMap = response;\r\n        this._filterByDistrictCm();\r\n      })\r\n      .then(() => {\r\n        return this._startExtentByDistrictCm(this.map);\r\n      })\r\n      .then(() => {\r\n        this._setToolbarDraw();\r\n      })\r\n      .catch(err => {\r\n        this._showMessage(err.message, type = \"error\")\r\n      });\r\n  },\r\n\r\n  _setToolbarDraw() {\r\n    ToolDraw.map = this.map;\r\n    // ToolDraw.lotUrl = this.layersMap.getLayerInfoById(idLyrCfLotes).getUrl();\r\n    ToolDraw.lotFeatureLayer = this.map.getLayer(idLyrCfLotes);\r\n    ToolDraw.anotherToolbar = toolbarCm;\r\n    ToolDraw.initToolDraw();\r\n    ToolDraw.controlMeasurementRealTime = this.measurementLabelApCm;\r\n    ToolDraw.controlMeasurementTable = this.bodyTbMeasurementApCm;\r\n    ToolDraw.linearDivision = graphicLayerLineaDivision;\r\n    ToolDraw.callbackAddLineDivision = this._divisorLine;\r\n    dojo.query('#measurementNewCm').on(\"click\", ToolDraw.activateToolDraw.bind(ToolDraw));\r\n\r\n  },\r\n\r\n  _showMessage(message, type = 'message') {\r\n    const title = `${this.nls.widgetTitle}: ${type}`\r\n    switch (type) {\r\n      case 'error':\r\n        new Message({\r\n          type: type,\r\n          titleLabel: title,\r\n          message: message,\r\n        });\r\n        break;\r\n      default:\r\n        new Message({\r\n          type: type,\r\n          titleLabel: title,\r\n          message: message,\r\n        });\r\n        break;\r\n    }\r\n\r\n  },\r\n\r\n  _showMessagePromise(messagetext) {\r\n    const deferred = new Deferred();\r\n    const message = new Message({\r\n      titleLabel: `${this.nls.widgetTitle}`,\r\n      message: messagetext,\r\n      buttons: [{\r\n        label: \"Ok\",\r\n        onClick: function () {\r\n          deferred.resolve(true);\r\n          message.hide();\r\n        }\r\n      }]\r\n    });\r\n    return deferred.promise;\r\n  },\r\n\r\n  _showMessageConfirm() {\r\n    const deferred = new Deferred();\r\n    const mensaje = new Message({\r\n      titleLabel: `${this.nls.widgetTitle}: question`,\r\n      message: selfCm.nls.quesstionContinue,\r\n      type: \"question\",\r\n      buttons: [{\r\n        label: \"Sí\",\r\n        onClick: function () {\r\n          deferred.resolve(true);\r\n          mensaje.hide();\r\n        }\r\n      }, {\r\n        label: \"No\",\r\n        onClick: function () {\r\n          deferred.resolve(false);\r\n          mensaje.hide();\r\n        }\r\n      }]\r\n    });\r\n    return deferred.promise;\r\n  },\r\n\r\n  _filterByDistrictCm() {\r\n    let queryPredios = this.layersMap.getLayerInfoById(idLyrCfPredios).getFilter()\r\n    queryPredios = queryPredios ? queryPredios + \" AND \" + this.queryUbigeo : this.queryUbigeo\r\n    this.layersMap.getLayerInfoById(idLyrCfPredios).setFilter(queryPredios)\r\n    this.layersMap.getLayerInfoById(idLyrCfLotesPun).setFilter(this.queryUbigeo)\r\n    this.layersMap.getLayerInfoById(idLyrCfEje_vial).setFilter(this.queryUbigeo)\r\n    this.layersMap.getLayerInfoById(idLyrCfNumeracion).setFilter(this.queryUbigeo)\r\n    this.layersMap.getLayerInfoById(idLyrCfArancel).setFilter(this.queryUbigeo)\r\n    this.layersMap.getLayerInfoById(idLyrCfLotes).setFilter(this.queryUbigeo)\r\n    this.layersMap.getLayerInfoById(idLyrCfUnidadesurbanas).setFilter(this.queryUbigeo)\r\n    this.layersMap.getLayerInfoById(idLyrCfParques).setFilter(this.queryUbigeo)\r\n    this.layersMap.getLayerInfoById(idLyrCfManzana).setFilter(this.queryUbigeo)\r\n    this.layersMap.getLayerInfoById(idLyrCfManzanaUrb).setFilter(this.queryUbigeo)\r\n    this.layersMap.getLayerInfoById(idLyrCfSector).setFilter(this.queryUbigeo)\r\n    // selfCm.layersMap.getLayerInfoById(idLyrActpuntoimg).setFilter(selfCm.queryUbigeo)\r\n  },\r\n\r\n  _startExtentByDistrictCm(map) {\r\n    const deferred = new Deferred();\r\n    const query = new Query()\r\n    query.where = this.queryUbigeo\r\n\r\n    const qTask = new QueryTask(this.layersMap.getLayerInfoById(idLyrDistricts).getUrl())\r\n\r\n    // qTask.executeForExtent(query, (results) => {\r\n    //   this.map.setExtent(results.extent).then(function () {\r\n    //     // get the next scale value from the current scale\r\n    //     const homeWidget = WidgetManager.getInstance().getWidgetsByName(\"HomeButton\");\r\n    //     homeWidget[0].homeDijit.extent = this.map.extent;\r\n    //     deferred.resolve(true);\r\n    //   })\r\n    // }, (error) => {\r\n    //   deferred.reject(error);\r\n    // })\r\n    // return deferred.promise;\r\n\r\n    qTask.executeForExtent(query)\r\n      .then(results => {\r\n        return map.setExtent(results.extent)\r\n      })\r\n      .then(() => {\r\n        const homeWidget = WidgetManager.getInstance().getWidgetsByName(\"HomeButton\");\r\n        homeWidget[0].homeDijit.extent = map.extent;\r\n        deferred.resolve(true);\r\n      })\r\n      .catch(err => deferred.reject(err));\r\n    return deferred.promise;\r\n  },\r\n\r\n  startup() {\r\n    this.inherited(arguments);\r\n\r\n    this.busyIndicator = BusyIndicator.create({\r\n      target: this.domNode.parentNode.parentNode,\r\n      backgroundOpacity: 0\r\n    });\r\n  },\r\n\r\n  _callApiRestServices(baseUrl, params) {\r\n    const url = new URL(baseUrl);\r\n    Object.keys(params).forEach(key => url.searchParams.append(key, params[key]));\r\n\r\n    return fetch(url)\r\n      .then(response => {\r\n        if (!response.ok) {\r\n          selfCm.busyIndicator.hide();\r\n          throw new Error(\"HTTP error \" + response.status);\r\n        }\r\n        return response.json();\r\n      })\r\n      .catch(function (err) {\r\n        selfCm.busyIndicator.hide();\r\n        console.log(\"An error occurred while fetching the data.\");\r\n      });\r\n  },\r\n\r\n  _getRequestsTrayDataCm(responseData, state) {\r\n    // Reemplazar todo el metodo para capturar datos de servicio\r\n    const data = responseData.filter((i) => i.status == state);\r\n    return data\r\n  },\r\n\r\n  _loadIniRequestsCm() {\r\n    dojo.query(`#${selfCm.currentTabActive}`)[0].click()\r\n  },\r\n\r\n  _parseDateStringtoFormat(dateString) {\r\n    const date = new Date(dateString)\r\n    const day = date.getDate()\r\n    const month = date.getMonth() + 1\r\n    const year = date.getFullYear()\r\n    return `${day}/${month}/${year}`\r\n  },\r\n\r\n  _loadRequestTabActiveCm(evt) {\r\n    // selfCm.busyIndicator.show();\r\n    selfCm.currentTabActive = evt.target.id;\r\n    selfCm.currentElementActive = evt.target;\r\n    selfCm.queryRequests['id_status'] = iconByState[evt.target.id].idStatus;\r\n    selfCm.queryRequests['offset'] = selfCm.defaultOffset;\r\n    selfCm._loadRequestsCm()\r\n    // .then(selfCm._controlLabelPagination());\r\n  },\r\n\r\n  _loadRequestsCm() {\r\n    selfCm.busyIndicator.show();\r\n    selfCm._callApiRestServices(selfCm.config.applicationListUrl, selfCm.queryRequests).then(response => {\r\n      selfCm.currentCount = response['count'];\r\n\r\n      response = response['results']\r\n      const dataHtml = response.map((i) => `<tr>\r\n                                        <td>${i.id}</td>\r\n                                        <td>${i.type}</td>\r\n                                        <td>${i.lands.map(lnd => lnd['cup']).join(', ')}</td>\r\n                                        <td>${selfCm._parseDateStringtoFormat(i.date)}</td>\r\n                                        <td>\r\n                                          <button id=\"${iconByState[selfCm.currentTabActive].id}\" value=\"${i.idType}\" class=\"stateRequestClsCm\">\r\n                                            <i class=\"${iconByState[selfCm.currentTabActive].icon}\"></i>\r\n                                          </button>\r\n                                        </td>\r\n                                      </tr>`\r\n      )\r\n      const tbody = dojo.create('tbody', { innerHTML: dataHtml.join('') });\r\n      const tb = dojo.query(\".tableRequestClsCm\")[0]\r\n      if (tb.getElementsByTagName(\"tbody\").length > 0) {\r\n        selfCm.tableRequestApCm.removeChild(tb.getElementsByTagName(\"tbody\")[0])\r\n      }\r\n      selfCm.tableRequestApCm.appendChild(tbody);\r\n      if (selfCm.currentTabActive == requestToAttendState) {\r\n        dojo.query(\".stateRequestClsCm\").on('click', selfCm._openFormCase);\r\n      }\r\n      if (selfCm.currentTabActive == requestsAttendState) {\r\n        dojo.query(\".stateRequestClsCm\").on('click', selfCm._openFormResult);\r\n      }\r\n\r\n      dojo.query(\".tablinksCm\").removeClass(\"active\");\r\n      selfCm.currentElementActive.classList.add(\"active\");\r\n      selfCm._controlLabelPagination();\r\n      selfCm.busyIndicator.hide();\r\n    })\r\n  },\r\n\r\n  _changeLimitPagination(evt) {\r\n    selfCm.queryRequests['limit'] = parseInt(evt.target.value);\r\n    selfCm.queryRequests['offset'] = selfCm.defaultOffset;\r\n    selfCm._loadRequestsCm();\r\n  },\r\n\r\n  _nextPagePagination(evt) {\r\n    selfCm.queryRequests['offset'] = selfCm.queryRequests['offset'] + selfCm.queryRequests['limit'];\r\n    selfCm._loadRequestsCm();\r\n  },\r\n\r\n  _prevPagePagination(evt) {\r\n    selfCm.queryRequests['offset'] = selfCm.queryRequests['offset'] - selfCm.queryRequests['limit'];\r\n    // if (selfCm.queryRequests['offset'] < 0) {\r\n    //   selfCm.queryRequests['offset'] = 0; // Ensure offset does not go negative\r\n    // }\r\n    selfCm._loadRequestsCm();\r\n  },\r\n\r\n  _controlLabelPagination() {\r\n    const ini = selfCm.queryRequests['offset'] + 1\r\n    dojo.query(\".buttonPaginationPrevClsCm\")[0].disabled = ini == 1 ? true : false\r\n    const end = selfCm.queryRequests['offset'] + selfCm.queryRequests['limit']\r\n    dojo.query(\".buttonPaginationNextClsCm\")[0].disabled = end >= selfCm.currentCount ? true : false\r\n    dojo.query(\".labelPaginationCtnCm\")[0].innerHTML = `${ini} - ${end} de ${selfCm.currentCount}`\r\n  },\r\n\r\n  _zoomToPredSelectedEvt(evt) {\r\n    // @cpu\r\n    const cup = evt.currentTarget.dataset.cup\r\n    return selfCm._zoomToPredSelected(cup)\r\n  },\r\n\r\n  _handleFeatureSelected(feature) {\r\n    const featureSelected = new GraphicsLayer({\r\n      id: idGraphicPredioSelectedCm\r\n    });\r\n    feature[0].setSymbol(symbolPredioSelected);\r\n    featureSelected.add(feature[0]);\r\n    selfCm.map.addLayer(featureSelected);\r\n    selfCm.map.centerAt(feature[0].geometry);\r\n\r\n    setTimeout(function () {\r\n      // clearInterval(interval);\r\n      selfCm._removeLayerGraphic(idGraphicPredioSelectedCm);\r\n    }, 1000);\r\n  },\r\n\r\n  _zoomToPredSelected(cup) {\r\n    selfCm.busyIndicator.show();\r\n    const deferred = new Deferred();\r\n    const LandCls = new UtilityCase.Land();\r\n    selfCm._removeLayerGraphic(idGraphicPredioSelectedCm);\r\n    const prediosLayer = selfCm.layersMap.getLayerInfoById(idLyrCfPredios);\r\n    const propertyLayer = new FeatureLayer(prediosLayer.getUrl(), {\r\n      mode: FeatureLayer.MODE_ONDEMAND,\r\n      outFields: [\"*\"]\r\n    });\r\n    // crear una consulta para seleccionar la fila deseada\r\n    const query = new Query();\r\n    // @cpu\r\n    query.where = `${_UBIGEO_FIELD} = '${paramsApp['ubigeo']}' and ${LandCls.codCpu} = '${cup}' and ${LandCls.estado} = 1`;\r\n\r\n    // seleccionar la fila\r\n    propertyLayer.selectFeatures(query, FeatureLayer.SELECTION_NEW)\r\n      .then(\r\n        results => {\r\n          if (results.length == 0) {\r\n            throw new Error(selfCm.nls.emptyLandSelected)\r\n          }\r\n          // if (selfCm.case == 2) {\r\n          //   if (results.length < 2) {\r\n          //     throw new Error(selfCm.nls.errorAcumulationLandsNumber);\r\n          //   }\r\n          // }\r\n          selfCm._handleFeatureSelected(results)\r\n          selfCm.busyIndicator.hide();\r\n          return deferred.resolve(results)\r\n        }\r\n      )\r\n      .catch(error => {\r\n        selfCm.busyIndicator.hide();\r\n        selfCm._showMessage(error.message, type = \"error\")\r\n        deferred.reject(error)\r\n      })\r\n    return deferred.promise;\r\n  },\r\n\r\n  _openSupportingDocument(evt) {\r\n    // check if value is empty\r\n    if (!evt.currentTarget.value) {\r\n      selfCm._showMessage(selfCm.nls.emptyDocSupport, type = \"error\")\r\n      return\r\n    }\r\n    window.open(evt.currentTarget.value, '_blank').focus();\r\n  },\r\n\r\n  executeQueryTask(url, query, type = 'query') {\r\n    return new Promise((resolve, reject) => {\r\n      const qTask = new QueryTask(url);\r\n      switch (type) {\r\n        case 'query':\r\n          qTask.execute(query, resolve, reject);\r\n          break;\r\n        case 'queryForExtent':\r\n          qTask.executeForExtent(query, resolve, reject);\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    });\r\n  },\r\n\r\n  _getLandsOriginals() {\r\n    const self = this;\r\n    const deferred = new Deferred();\r\n    const LandCls = new UtilityCase.Land();\r\n    const LotCls = new UtilityCase.Lot();\r\n    const queryLands = new Query();\r\n    // @cpu\r\n    const cpuOriginal = self.currentLandTabRows.map(i => i.cup);\r\n    queryLands.where = `${UtilityCase.ubigeoFieldName} = '${paramsApp['ubigeo']}' and ${LandCls.codCpu} in ('${cpuOriginal.join(\"', '\")}') and ${LandCls.estado} = 1`;\r\n    queryLands.returnGeometry = true;\r\n    queryLands.outFields = [\"*\"];\r\n    const urlLands = self.layersMap.getLayerInfoById(idLyrCfPredios).getUrl();\r\n    self.executeQueryTask(urlLands, queryLands)\r\n      .then(results => {\r\n        if (results.features.length == 0) {\r\n          throw new Error(self.nls.errorGetLand);\r\n        }\r\n        self.currentLandRows = results.features;\r\n        const idLots = self.currentLandRows.map((i) => i.attributes[LotCls.idLotP]);\r\n        deferred.resolve(idLots);\r\n      })\r\n      .catch(error => {\r\n        deferred.reject(error);\r\n      });\r\n    return deferred.promise;\r\n  },\r\n  _getLotsOriginals(idLots) {\r\n    const self = this;\r\n    const LotCls = new UtilityCase.Lot()\r\n    const deferred = new Deferred();\r\n    const queryLots = new Query();\r\n    queryLots.where = `${LotCls.idLotP} in (${idLots.join(\",\")}) and (${UtilityCase.ubigeoFieldName} = ${paramsApp['ubigeo']})`;\r\n    self.lotesQuery = queryLots.where;\r\n    queryLots.returnGeometry = true;\r\n    queryLots.outFields = [\"*\"];\r\n    const urlLots = self.layersMap.getLayerInfoById(idLyrCfLotes).getUrl();\r\n    self.executeQueryTask(urlLots, queryLots)\r\n      .then(results => {\r\n        if (results.features.length == 0) {\r\n          throw new Error(self.nls.emptyLotRequests);\r\n        }\r\n        self.currentLotsRows = results.features;\r\n        const codMznValues = self.currentLotsRows.map((i) => i.attributes[_COD_MZN_FIELD]).join(\",\")\r\n        const codSectValues = self.currentLotsRows.map((i) => i.attributes[_COD_SECT_FIELD]).join(\",\")\r\n        self.arancel = `(${UtilityCase.ubigeoFieldName} = ${paramsApp['ubigeo']}) and ${_COD_MZN_FIELD} in (${codMznValues}) and ${_COD_SECT_FIELD} in (${codSectValues})`;\r\n        deferred.resolve(idLots);\r\n      })\r\n      .catch(error => {\r\n        deferred.reject(error);\r\n      });\r\n    return deferred.promise;\r\n  },\r\n  _getPointLotsOriginals(idLots) {\r\n    const self = this;\r\n    const LotCls = new UtilityCase.Lot()\r\n    const deferred = new Deferred();\r\n    const queryPointLots = new Query();\r\n    queryPointLots.where = `${LotCls.idLotP} in (${idLots.join(\",\")}) and (${UtilityCase.ubigeoFieldName} = ${paramsApp['ubigeo']})`;\r\n    queryPointLots.returnGeometry = true;\r\n    queryPointLots.outFields = [\"*\"];\r\n    const urlPointLots = self.layersMap.getLayerInfoById(idLyrCfLotesPun).getUrl();\r\n    self.executeQueryTask(urlPointLots, queryPointLots)\r\n      .then(results => {\r\n        if (results.features.length == 0) {\r\n          throw new Error(self.nls.emptyPointLotRequests);\r\n        }\r\n        self.currentPoinLotsRows = results.features;\r\n        deferred.resolve(idLots);\r\n      })\r\n      .catch(error => {\r\n        deferred.reject(error);\r\n      });\r\n    return deferred.promise;\r\n  },\r\n\r\n  _getLandsOriginalsTab(idSolicitud) {\r\n    const self = this;\r\n    const deferred = new Deferred();\r\n    const urlOriginal = `${self.config.landsByApplicationUrl}/${idSolicitud}`;\r\n    fetch(urlOriginal)\r\n      .then(response => {\r\n        if (!response.ok) {\r\n          throw new Error(\"HTTP error \" + response.status);\r\n        }\r\n        return response.json()\r\n      })\r\n      .then(response => {\r\n        if (response.count == 0) {\r\n          throw new Error(self.nls.errorGetLand);\r\n        }\r\n        self.currentLandTabRows = response.results;\r\n        deferred.resolve(self.currentLandTabRows);\r\n      })\r\n      .catch(error => {\r\n        deferred.reject(error);\r\n      });\r\n    return deferred.promise;\r\n  },\r\n\r\n  _getOriginalData(idSolicitud) {\r\n    return this._getLandsOriginalsTab(idSolicitud)\r\n      .then(landsTab => this._getLandsOriginals())\r\n      .then(idLots => this._getPointLotsOriginals(idLots))\r\n      .then(idLots => this._getLotsOriginals(idLots))\r\n      .then((idLots) => {\r\n        return idLots;\r\n      })\r\n      .catch(error => {\r\n        return error;\r\n      });\r\n  },\r\n\r\n  _zoomExtentToLote() {\r\n    if (!this.currentLotsRows) {\r\n      return\r\n    }\r\n    if (this.case == 2) {\r\n      if (this.currentLotsRows.length < 2) {\r\n        throw new Error(this.nls.errorAcumulationLandsNumber);\r\n      }\r\n    }\r\n    const unionPredios = this._unionFeatures(this.currentLotsRows.map((i) => i.geometry))\r\n    this.map.setExtent(unionPredios.getExtent().expand(2))\r\n  },\r\n\r\n  _zoomHomeRequests() {\r\n    return selfCm._zoomExtentToLote()\r\n  },\r\n\r\n  _toggleBodyCaseInfo(evt) {\r\n    this.closest('.caseInfoClsCm').querySelector('.bodyPredInfoClsCm').classList.toggle('active')\r\n  },\r\n\r\n  _requestCaseInfo() {\r\n    selfCm.busyIndicator.show();\r\n    const urlResults = `${selfCm.config.resultsByApplication}/${selfCm.codRequestsCm}?limit=${selfCm.limitAnother}`\r\n    const urlDocSupport = `${selfCm.config.applicationListUrl}/${selfCm.codRequestsCm}`\r\n    const urlAffectedLands = `${selfCm.config.affectedLands}/${selfCm.codRequestsCm}?limit=${selfCm.limitAnother}`\r\n\r\n    Promise.all([\r\n      selfCm._getOriginalData(selfCm.codRequestsCm),\r\n      fetch(urlResults).then(response => {\r\n        if (!response.ok) {\r\n          selfCm.busyIndicator.hide();\r\n          throw new Error(\"HTTP error \" + response.status);\r\n        }\r\n        return response.json()\r\n      }),\r\n      fetch(urlDocSupport).then(response => response.json()),\r\n      fetch(urlAffectedLands).then(response => {\r\n        if (!response.ok) {\r\n          selfCm.busyIndicator.hide();\r\n          throw new Error(\"HTTP error \" + response.status);\r\n        }\r\n        return response.json()\r\n      })\r\n    ]).then(function ([_, responseResults, responseDocSupport, responseAffectedLands]) {\r\n\r\n      if (_.message) {\r\n        selfCm.busyIndicator.hide();\r\n        selfCm._showMessage(_.message, type = \"error\");\r\n        // return\r\n      }\r\n\r\n      selfCm.currentLandTabRows = selfCm.currentLandTabRows || [];\r\n      const rows = selfCm.currentLandTabRows.map((i, idx) => {\r\n        return CaseInfo.contentCard(i, 'original', i.cup, active = selfCm.case != 2 ? true : false);\r\n      });\r\n\r\n      if (selfCm.case != 4) {\r\n        if (responseResults.count == 0) {\r\n          selfCm._showMessage(`${selfCm.nls.empyLandResultsRequests} ${selfCm.codRequestsCm}`, type = \"error\");\r\n          selfCm.busyIndicator.hide();\r\n          // return\r\n        }\r\n      }\r\n\r\n\r\n\r\n      dojo.query(\"#showInfoDocCm\")[0].value = responseDocSupport.support\r\n      dojo.query('.CtnOriginalClsCm')[0].innerHTML = rows.join('');\r\n\r\n      if (selfCm.case == 2 || selfCm.case == 3) {\r\n        if (responseAffectedLands.results.length > 0) {\r\n          const rowsAffected = responseAffectedLands.results.map((i, idx) => {\r\n            return CaseInfo.contentCard(i, 'original', i.cup, active = false);\r\n          });\r\n          dojo.query('.CtnAffectedClsCm')[0].innerHTML = rowsAffected.join('');\r\n          dojo.query('.lblAffectedClsCm').addClass('active');\r\n        }\r\n      } else {\r\n        dojo.query('.CtnAffectedClsCm')[0].innerHTML = '';\r\n        dojo.query('.lblAffectedClsCm').removeClass('active');\r\n      }\r\n\r\n      dojo.query(\".zoomPredInfoClsCm\").on('click', selfCm._zoomToPredSelectedEvt);\r\n\r\n      if (selfCm.case != 4) {\r\n        const rowsResults = responseResults.results.map((i, idx) => {\r\n          return CaseInfo.contentCard(i, 'result', idx + 1, false, true);\r\n        });\r\n        dojo.query('.CtnResultClsCm')[0].innerHTML = rowsResults.join('');\r\n        dojo.query('.lblResultsClsCm').addClass('active');\r\n      } else {\r\n        dojo.query('.CtnResultClsCm')[0].innerHTML = '';\r\n        dojo.query('.lblResultsClsCm').removeClass('active');\r\n      }\r\n\r\n      dojo.query(\".colapsePredInfoClsCm\").on('click', selfCm._toggleBodyCaseInfo);\r\n\r\n      // @cpu\r\n      selfCm.uniqueCodeLands = selfCm.currentLandTabRows.map((i) => i.cup).join(',');\r\n      selfCm.responseRequests = responseResults['results']\r\n\r\n    })\r\n      .then(function () {\r\n        switch (selfCm.case) {\r\n          case \"1\":\r\n            selfCm.reasignarApCm.classList.toggle('active')\r\n            break;\r\n          case \"2\":\r\n            selfCm.fusionApCm.classList.toggle('active')\r\n            break\r\n          case \"3\":\r\n            selfCm.divisionApCm.classList.toggle('active')\r\n            selfCm.containerToolDrawApCm.classList.toggle('active')\r\n            break\r\n          case \"4\":\r\n            selfCm.eliminacionApCm.classList.toggle('active')\r\n            break\r\n          case \"5\":\r\n            selfCm.independenceApCm.classList.toggle('active')\r\n            selfCm.independenceApCm.innerHTML = ''\r\n            LandAssignment.title = \"Independización\";\r\n            LandAssignment.lands = selfCm.responseRequests;\r\n            LandAssignment.pointLots = selfCm.currentPoinLotsRows;\r\n            LandAssignment.map = selfCm.map;\r\n            LandAssignment.landsSymbol = symbolPredio;\r\n            LandAssignment.landsSymbolSelected = symbolPredioSelected2;\r\n            LandAssignment.removeAllGraphics();\r\n            selfCm.independenceApCm.appendChild(LandAssignment.renderTableLandAssignment());\r\n\r\n            LandProcess.title = \"Enviar datos\";\r\n            LandProcess.type = \"independence\";\r\n            selfCm.independenceApCm.appendChild(LandProcess.renderButtonProcess());\r\n            dojo.query(`#${LandProcess.id}`).on('click', selfCm._executeIndependenceLands);\r\n            dojo.query(\".pointLotSelectionCm\").on('change', LandAssignment.selectedPointLots.bind(LandAssignment));\r\n            dojo.query('.tableClsCm tr').on('mouseover', LandAssignment.highlightLand.bind(LandAssignment));\r\n            dojo.query('.tableClsCm tr').on('mouseout', LandAssignment.reestartSymbolLand.bind(LandAssignment));\r\n            break\r\n          default:\r\n            break;\r\n        }\r\n\r\n        selfCm.resultCtnApCm.classList.remove('active')\r\n        selfCm.obsCtnApCm.classList.remove('active')\r\n        selfCm.requestTrayApCm.classList.remove('active')\r\n        selfCm.casesCtnApCm.classList.toggle('active')\r\n        selfCm._zoomExtentToLote()\r\n        selfCm.busyIndicator.hide();\r\n      })\r\n      .catch(function (error) {\r\n        selfCm.busyIndicator.hide();\r\n        selfCm._showMessage(error.message, type = \"error\");\r\n      })\r\n\r\n  },\r\n\r\n  _openFormCase(evt) {\r\n    if (evt.currentTarget.id == \"editRequestsCm\") {\r\n      const row = dojo.query(evt.currentTarget).closest(\"tr\")[0];\r\n      const rowList = dojo.query(\"td\", row).map(td => td.innerHTML);\r\n      selfCm.codRequestsCm = rowList[0]\r\n      selfCm.caseDescription = rowList[1]\r\n      dojo.query('#titleCaseCm')[0].innerHTML = `<span>${selfCm.caseDescription} <span class=\"fa fa-search\" style=\"font-size: 15px\"></span></span>`\r\n\r\n      selfCm.case = evt.currentTarget.value\r\n      selfCm._requestCaseInfo();\r\n\r\n    } else if (evt.currentTarget.id == 'backTrayCm' || evt.currentTarget.id == 'backTrayResultCm') {\r\n      // desactivar el toolbarCm de edicion si esta activado\r\n      toolbarCm.deactivate();\r\n\r\n      // deshabilitar snapping\r\n      selfCm.map.disableSnapping()\r\n      selfCm.bodyTbLinesDvApCm.innerHTML = ''\r\n      selfCm.bodyTbPrediosDvApCm.innerHTML = ''\r\n\r\n      dojo.query(\".caseClsCm\").removeClass(\"active\")\r\n      // remove all graphics layer if exist\r\n      selfCm._removeLayerGraphic(idGraphicPredioCm);\r\n      selfCm._removeLayerGraphic(idGraphicLoteCm);\r\n      selfCm._removeLayerGraphic(idGraphicPuntoLote);\r\n      selfCm._removeLayerGraphic(idGraphicFrenteLote);\r\n      selfCm._removeLayerGraphic(idGraphicPredioSelectedCm);\r\n      selfCm._removeLayerGraphic(idGraphicLabelCodLote)\r\n      selfCm.bodyTbDatosLoteDvApCm.innerHTML = ''\r\n      // selfCm.bodyTbMeasurementApCm.innerHTML = ''\r\n      ToolDraw.removeAllGraphicsIntoMeasurements();\r\n\r\n      graphicLayerLineaDivision.clear();\r\n      graphicLayerLabelLineaDivision.clear();\r\n      graphicLayerPredioByDivison.clear();\r\n\r\n      selfCm.lotesQuery = null\r\n      selfCm.arancel = null\r\n      selfCm.xy = []\r\n      selfCm.currentLandTabRows = null;\r\n\r\n      selfCm.casesCtnApCm.classList.remove('active')\r\n      selfCm.resultCtnApCm.classList.remove('active')\r\n      selfCm.containerToolDrawApCm.classList.remove('active')\r\n      selfCm.obsCtnApCm.classList.remove('active')\r\n      selfCm.requestTrayApCm.classList.toggle('active')\r\n      selfCm._removeClassActiveButton()\r\n      dojo.query('.CtnAffectedClsCm')[0].innerHTML = '';\r\n      dojo.query('.lblAffectedClsCm').removeClass('active');\r\n\r\n      if (selfCm.currentTabActive == requestToAttendState) {\r\n        dojo.query(\".tablinksCm.active\")[0].click();\r\n        // selfCm._loadRequestTabActiveCm()\r\n        // selfCm.queryRequests['offset'] = selfCm.defaultOffset;\r\n      }\r\n      selfCm._loadRequestsCm();\r\n      // selfCm._loadIniRequestsCm();\r\n    }\r\n\r\n  },\r\n  _openFormObs() {\r\n    selfCm.textAreaObsApCm.value = ''\r\n    const imageDiv = dojo.query(\".thumbnailClsCm\")[0];\r\n    selfCm.imgUploadApCm.value = ''\r\n    imageDiv.style.backgroundImage = \"none\";\r\n    imageDiv.innerHTML = \"<span class=alignVCenter><i class='far fa-image'></i></span>\";\r\n    dojo.query('#headeRequestsCtnCm')[0].innerHTML = `<span class=\"alignVCenter\">Solicitud: ${selfCm.codRequestsCm}</span>`\r\n    selfCm.casesCtnApCm.classList.toggle(\"active\");\r\n    selfCm.obsCtnApCm.classList.toggle('active')\r\n  },\r\n\r\n  _FormResult(id_solicitud, caseCm) {\r\n    selfCm.busyIndicator.show();\r\n    const urlPredioResults = `${selfCm.config.resultsByApplication}/${id_solicitud}?limit=${selfCm.limitAnother}`\r\n    if (caseCm == Deactivate.nameCase) {\r\n      selfCm.busyIndicator.hide();\r\n      selfCm._showMessage(selfCm.nls.resultDeactivate)\r\n      return\r\n    }\r\n    selfCm._callApiRestServices(urlPredioResults, {}).then(function (response) {\r\n      try {\r\n        selfCm.bodyTbResultsApCm.innerHTML = ''\r\n        dojo.query(\"#titleCaseResult\")[0].innerHTML = `<span>Solicitud ${id_solicitud}: ${caseCm}</span>`\r\n\r\n        const rows = response.results.map((predio, index) => {\r\n          return `<tr><td class=\"center-aligned\">${index + 1}</td>\r\n                  <td>${predio['cup']}</td>\r\n                  <td>${predio['address']}</td>\r\n                  <td class=\"center-aligned\">\r\n                    <span id=\"${predio['cup']}_search\" class=\"zoomPredioResultClsCm\"><i class=\"fas fa-search\"></i></span>\r\n                  </td></tr>`\r\n        })\r\n        selfCm.bodyTbResultsApCm.innerHTML = rows.join('')\r\n        dojo.query('.zoomPredioResultClsCm').on('click', selfCm._centerAtPredioResult)\r\n        selfCm.casesCtnApCm.classList.remove(\"active\");\r\n        selfCm.obsCtnApCm.classList.remove('active')\r\n        selfCm.requestTrayApCm.classList.remove('active')\r\n        selfCm.resultCtnApCm.classList.toggle('active')\r\n        selfCm.busyIndicator.hide()\r\n      }\r\n      catch (error) {\r\n        console.log(error)\r\n        selfCm.busyIndicator.hide()\r\n      }\r\n    })\r\n  },\r\n\r\n  _centerAtPredioResult(evt) {\r\n    const cup = evt.currentTarget.id.replace('_search', '')\r\n    selfCm._zoomToPredSelected(cup)\r\n  },\r\n\r\n  _openFormResult(evt) {\r\n    const row = dojo.query(evt.currentTarget).closest(\"tr\")[0];\r\n    const rowList = dojo.query(\"td\", row).map(td => td.innerHTML);\r\n    selfCm.codRequestsCm = rowList[0]\r\n    selfCm.caseDescription = rowList[1]\r\n    selfCm._FormResult(selfCm.codRequestsCm, selfCm.caseDescription)\r\n  },\r\n\r\n  _refreshLayersCF() {\r\n    selfCm.map.getLayer(idLyrCfPredios).setVisibility(false)\r\n    selfCm.map.getLayer(idLyrCfLotesPun).setVisibility(false)\r\n    selfCm.map.getLayer(idLyrCfLotes).setVisibility(false)\r\n    selfCm.map.getLayer(idLyrCfPredios).setVisibility(true)\r\n    selfCm.map.getLayer(idLyrCfLotes).setVisibility(true)\r\n    selfCm.map.getLayer(idLyrCfLotesPun).setVisibility(true)\r\n    // selfCm.map.getLayer(idLyrCatastroFiscal).setVisibility(false)\r\n    // selfCm.map.getLayer(idLyrCatastroFiscal).setVisibility(true)\r\n  },\r\n\r\n  // Toolbar function\r\n  _createToolbar() {\r\n    toolbarCm = new Draw(this.map);\r\n    toolbarCm.on(\"draw-end\", this._addToMap);\r\n  },\r\n\r\n  _addToMap(evt) {\r\n    if (evt.geometry.type === \"point\") {\r\n      const screenPoint = selfCm.map.toScreen(evt.geometry)\r\n      const deferred = selfCm.map.snappingManager.getSnappingPoint(screenPoint);\r\n      deferred.then(function (value) {\r\n        if (value !== undefined) {\r\n          const point_g = webMercatorUtils.webMercatorToGeographic(new Point(value));\r\n          const graphic = new Graphic(point_g, symbolByCase[selfCm.case].symbol);\r\n          // si es el caso reasignacion de predio\r\n          if (selfCm.case == 1 || selfCm.case == 2) {\r\n\r\n            const graphicLayer = new GraphicsLayer({\r\n              id: idGraphicPredioCm,\r\n            });\r\n            graphicLayer.add(graphic);\r\n            selfCm.map.addLayer(graphicLayer);\r\n            selfCm.xy = [point_g.x, point_g.y]\r\n          }\r\n          else if (selfCm.case == 3) {\r\n            graphic['attributes'] = {\r\n              cpm: selfCm.cpmPredioDivision,\r\n              id: selfCm.idPredioDivision,\r\n              resolutionType: selfCm.resolutionType,\r\n              resolutionDocument: selfCm.resolutionDocument,\r\n              floor: selfCm.floor,\r\n              urbanLotNumber: selfCm.urbanLotNumber,\r\n            }\r\n            graphicLayerPredioByDivison.add(graphic);\r\n          }\r\n          selfCm.map.setInfoWindowOnClick(true);\r\n          toolbarCm.deactivate();\r\n          selfCm._removeClassActiveButton()\r\n        } else {\r\n          selfCm._showMessage(selfCm.nls.errorSnapingLocate, type = \"error\")\r\n          // alert(selfCm.nls.errorSnapingLocate);\r\n        }\r\n      }, function (error) {\r\n        console.log(error);\r\n      });\r\n    } else if (evt.geometry.type === \"polyline\") {\r\n      selfCm._divisorLine(evt.geometry);\r\n      // selfCm.idxLines = selfCm.idxLines + 1\r\n      // const nameIdLine = `Polyline_${selfCm.idxLines}`\r\n      // const graphic = new Graphic(evt.geometry, symbolDivisionLote, { id: nameIdLine });\r\n      // graphicLayerLineaDivision.add(graphic);\r\n      // selfCm._populateTableDrawLine(nameIdLine)\r\n      // selfCm._addNameToLine(nameIdLine, evt.geometry)\r\n      // selfCm.map.addLayer(graphicLayerLineaDivision);\r\n      // selfCm.map.setInfoWindowOnClick(true);\r\n      // toolbarCm.deactivate();\r\n      // selfCm._removeClassActiveButton()\r\n      // desactiva el boton luego de dibujar\r\n    }\r\n    // selfCm.map.disableSnapping()\r\n    // check exist activeButton class in button\r\n\r\n  },\r\n\r\n  _divisorLine(geometry) {\r\n    selfCm.idxLines = selfCm.idxLines + 1\r\n    const nameIdLine = `Polyline_${selfCm.idxLines}`\r\n\r\n    const polylineGeomUtm = webMercatorUtils.webMercatorToGeographic(geometry)\r\n    let vertices = polylineGeomUtm.paths[0];\r\n    const lastTwoCoords = vertices.slice(-2);\r\n    const line = turf.lineString(lastTwoCoords);\r\n    const bearing = turf.bearing(turf.point(line.geometry.coordinates[0]), turf.point(line.geometry.coordinates[1]));\r\n    const options = { units: 'meters' };\r\n    const addDistance = 0.1\r\n    const point = turf.point(line.geometry.coordinates[1]);\r\n    const destintation = turf.destination(point, addDistance, bearing, options);\r\n\r\n    // reverse coordinates of line\r\n    let vertices2 = [...vertices];\r\n    vertices2.reverse();\r\n    const lastTwoCoords2 = vertices2.slice(-2);\r\n    const line2 = turf.lineString(lastTwoCoords2);\r\n    const bearing2 = turf.bearing(turf.point(line2.geometry.coordinates[0]), turf.point(line2.geometry.coordinates[1]));\r\n    const point2 = turf.point(line2.geometry.coordinates[1]);\r\n    const destintation2 = turf.destination(point2, addDistance, bearing2, options);\r\n\r\n    vertices[vertices.length - 1] = destintation.geometry.coordinates;\r\n    // add vertices2 first element to vertices\r\n    vertices.unshift(destintation2.geometry.coordinates);\r\n\r\n    const polyline = new Polyline({\r\n      paths: [vertices],\r\n      spatialReference: polylineGeomUtm.spatialReference\r\n    });\r\n    let response = webMercatorUtils.geographicToWebMercator(polyline);\r\n\r\n    // const polygonW = webMercatorUtils.webMercatorToGeographic(selfCm.currentLotsRows[0].geometry);\r\n    // if (!geometryEngine.touches(polygonW, response)) {\r\n    //   response = geometry;\r\n    // }\r\n\r\n\r\n    const graphic = new Graphic(response, symbolDivisionLote, { id: nameIdLine });\r\n    graphicLayerLineaDivision.add(graphic);\r\n    selfCm._populateTableDrawLine(nameIdLine)\r\n    selfCm._addNameToLine(nameIdLine, response)\r\n    selfCm.map.addLayer(graphicLayerLineaDivision);\r\n    selfCm.map.setInfoWindowOnClick(true);\r\n    toolbarCm.deactivate();\r\n    selfCm._removeClassActiveButton()\r\n  },\r\n\r\n  _removeClassActiveButton() {\r\n    if (dojo.query(`#${selfCm.idButtonDrawActive}`).length > 0) {\r\n      dojo.query(`#${selfCm.idButtonDrawActive}`)[0].classList.remove('activeButton')\r\n    }\r\n  },\r\n\r\n  _removeLayerGraphic(layerId) {\r\n    if (selfCm.map.graphicsLayerIds.includes(layerId)) {\r\n      selfCm.map.removeLayer(selfCm.map.getLayer(layerId));\r\n    }\r\n  },\r\n\r\n  _activateTool(evt) {\r\n    selfCm._removeClassActiveButton()\r\n    selfCm.idButtonDrawActive = evt.currentTarget.id\r\n    dojo.query(`#${selfCm.idButtonDrawActive}`)[0].classList.add('activeButton')\r\n    selfCm._activateSnappingByReasignar();\r\n    selfCm.map.setInfoWindowOnClick(false);\r\n    selfCm._removeLayerGraphic(idGraphicPredioCm);\r\n    toolbarCm.activate(Draw[\"POINT\"]);\r\n  },\r\n\r\n  _activateToolAcumulacion(evt) {\r\n    selfCm._removeClassActiveButton()\r\n    selfCm.idButtonDrawActive = evt.currentTarget.id;\r\n    selfCm.cpmAcumulacion = evt.currentTarget.dataset.cpm === 'null' ? null : evt.currentTarget.dataset.cpm;\r\n    selfCm.resolutionType = evt.currentTarget.dataset.resolutiontype === 'null' ? null : evt.currentTarget.dataset.resolutiontype;\r\n    selfCm.resolutionDocument = evt.currentTarget.dataset.resolutiondocument === 'null' ? null : evt.currentTarget.dataset.resolutiondocument;\r\n    selfCm.floor = evt.currentTarget.dataset.floor === 'null' ? null : evt.currentTarget.dataset.floor;\r\n    selfCm.urbanLotNumber = evt.currentTarget.dataset.urbanlotnumber === 'null' ? null : evt.currentTarget.dataset.urbanlotnumber;\r\n    selfCm.idAcumulacion = evt.currentTarget.parentElement.parentElement.id.split('_')[1];\r\n    dojo.query(`#${selfCm.idButtonDrawActive}`)[0].classList.add('activeButton')\r\n    selfCm.map.setInfoWindowOnClick(false);\r\n    selfCm._activateSnappingByAcumulacion();\r\n    selfCm._removeLayerGraphic(idGraphicPredioCm);\r\n    toolbarCm.activate(Draw[\"POINT\"]);\r\n  },\r\n\r\n  _activateToolLinesDivision(evt) {\r\n    selfCm._removeClassActiveButton();\r\n    ToolDraw.deactivateToolbarAnotherToolbar();\r\n    selfCm.idButtonDrawActive = evt.currentTarget.id;\r\n    dojo.query(`#${selfCm.idButtonDrawActive}`)[0].classList.add('activeButton');\r\n    selfCm.map.setInfoWindowOnClick(false);\r\n    selfCm._activateSnappingByDivision();\r\n    selfCm._removeLayerGraphic(idGraphicLoteCm);\r\n    selfCm._removeLayerGraphic(idGraphicPuntoLote);\r\n    selfCm._removeLayerGraphic(idGraphicFrenteLote);\r\n    selfCm._removeLayerGraphic(idGraphicLabelCodLote);\r\n    selfCm.bodyTbDatosLoteDvApCm.innerHTML = '';\r\n    // selfCm.bodyTbPrediosDvApCm.innerHTML = ''\r\n    graphicLayerPredioByDivison.clear();\r\n    toolbarCm.activate(Draw[\"POLYLINE\"]);\r\n  },\r\n\r\n  _activateSnappingByReasignar() {\r\n    const cflayer = selfCm.layersMap.getLayerInfoById(idLyrCfLotesPun)\r\n    const propertyLayer = new FeatureLayer(cflayer.getUrl(), {\r\n      mode: FeatureLayer.MODE_ONDEMAND,\r\n      outFields: [\"*\"]\r\n    });\r\n    const snapManager = selfCm.map.enableSnapping({\r\n      // alwaysSnap: true,\r\n      // snapKey: keys.CTRL,\r\n      snapPointSymbol: symbolSnapPointCm,\r\n      tolerance: 1,\r\n    });\r\n    // get layerinfo by id of layer to snap\r\n    const layerInfos = [{\r\n      layer: propertyLayer\r\n    }];\r\n\r\n    snapManager.setLayerInfos(layerInfos);\r\n  },\r\n\r\n  _activateSnappingByAcumulacion() {\r\n    const graphicLayerPuntoLote = selfCm.map.getLayer(idGraphicPuntoLote)\r\n    const graphicsLayerInfo = new esri.layers.LayerInfo({\r\n      id: graphicLayerPuntoLote.id, // El id del `GraphicsLayer`\r\n      name: graphicLayerPuntoLote.name, // El nombre del `GraphicsLayer`\r\n      layer: graphicLayerPuntoLote // El `GraphicsLayer` a utilizar\r\n    });\r\n\r\n    // Agregar el `LayerInfo` al mapa y habilitar el snapping\r\n    selfCm.map.enableSnapping({\r\n      layerInfos: [graphicsLayerInfo], // Agregar el `LayerInfo` al mapa\r\n      // alwaysSnap: true,\r\n      snapPointSymbol: symbolSnapPointCm,\r\n      tolerance: 5,\r\n    });\r\n  },\r\n\r\n  _activateSnappingByDivision() {\r\n    const graphicsLayerInfo = new esri.layers.LayerInfo({\r\n      id: graphicLayerLineaDivision.id, // El id del `GraphicsLayer`\r\n      name: graphicLayerLineaDivision.name, // El nombre del `GraphicsLayer`\r\n      layer: graphicLayerLineaDivision // El `GraphicsLayer` a utilizar\r\n    });\r\n\r\n    // const cflayer = selfCm.layersMap.getLayerInfoById(idLyrCfLotes)\r\n    // const propertyLayer = new FeatureLayer(cflayer.getUrl(), {\r\n    //   mode: FeatureLayer.MODE_ONDEMAND,\r\n    //   outFields: [\"*\"],\r\n    //   where: selfCm.lotesQuery\r\n    // });\r\n    const propertyLayer = selfCm.map.getLayer(idLyrCfLotes)\r\n    // change MODE_ONDEMAND\r\n    propertyLayer.mode = 2;\r\n    // propertyLayer.setAutoGeneralize(false);\r\n\r\n    const layerInfos = [{\r\n      // layer: selfCm.map.getLayer(idLyrCfLotes)\r\n      layer: propertyLayer\r\n    },\r\n      graphicsLayerInfo\r\n    ];\r\n\r\n    // Agregar el `LayerInfo` al mapa y habilitar el snapping\r\n    selfCm.map.enableSnapping({\r\n      layerInfos: layerInfos, // Agregar el `LayerInfo` al mapa\r\n      alwaysSnap: false,\r\n      snapPointSymbol: symbolSnapPointCm,\r\n      tolerance: 0,\r\n    });\r\n  },\r\n\r\n  // crear una funcion que permita dos poligonos aceptando dos poligonos json como parametros\r\n  // la funcion debe retornar un poligono json\r\n  _unionFeatures(arr) {\r\n    const union = geometryEngine.union(arr);\r\n    return union;\r\n  },\r\n\r\n  _unionFeaturesAcumulation(topology = false) {\r\n    // Creamos grafico de lote fusionado\r\n    const graphicLayerLoteFusion = new GraphicsLayer({\r\n      id: idGraphicLoteCm\r\n    });\r\n\r\n    const arr = selfCm.currentLotsRows.map((i) => i.geometry);\r\n\r\n    const response = selfCm._unionFeatures(arr);\r\n    if (topology) {\r\n      if (response.rings.length > 1) {\r\n        throw new Error(\"La acumulación no es posible (los predios no son contiguos)\")\r\n      }\r\n    }\r\n    const graphic = new Graphic(response, symbolFusionLote);\r\n\r\n    graphicLayerLoteFusion.add(graphic);\r\n    selfCm.map.addLayer(graphicLayerLoteFusion);\r\n    selfCm.map.setExtent(graphic._extent.expand(1.5), true);\r\n    return [response];\r\n  },\r\n\r\n  _ApplyAcumulationLotsRefactor() {\r\n    selfCm.busyIndicator.show();\r\n    selfCm._removeLayerGraphic(idGraphicPredioCm);\r\n    selfCm._removeLayerGraphic(idGraphicLoteCm);\r\n    selfCm._removeLayerGraphic(idGraphicPuntoLote);\r\n    selfCm._removeLayerGraphic(idGraphicFrenteLote);\r\n    selfCm._removeLayerGraphic(idGraphicLoteDeleteCm);\r\n    selfCm._removeLayerGraphic(idGraphicLabelCodLote);\r\n\r\n    if (!selfCm.lotesQuery) {\r\n      selfCm._showMessage(selfCm.nls.errorGetLand, 'warning');\r\n      selfCm.busyIndicator.hide();\r\n      return\r\n    }\r\n\r\n    return selfCm._getOriginalLots(selfCm.lotesQuery)\r\n      .then(originLots => {\r\n        const geomLoteAcumulation = selfCm._unionFeaturesAcumulation(topology = true);\r\n        return selfCm._getMaxCodLot(geomLoteAcumulation);\r\n      })\r\n      .then(proprsLot => {\r\n        selfCm._ordenarPoligonosNorteSur(\r\n          proprsLot.polygons,\r\n          parseInt(proprsLot.maxCodLote),\r\n          selfCm.bodyTbDatosLoteFsApCm\r\n        );\r\n        selfCm.map.setExtent(proprsLot.polygons[0].getExtent().expand(1.5), true);\r\n        return selfCm._addGraphicsPointLotsAndArancel();\r\n      })\r\n      .then(() => {\r\n        selfCm._populateTablePredio(selfCm.bodyTbPrediosFsApCm, selfCm._activateToolAcumulacion)\r\n        selfCm.busyIndicator.hide();\r\n      })\r\n      .catch(error => {\r\n        console.log(error)\r\n        selfCm.busyIndicator.hide();\r\n        selfCm._showMessage(error.message, type = \"error\")\r\n      })\r\n  },\r\n\r\n  _getMidpoint(polyline) {\r\n    const length = geometryEngine.geodesicLength(polyline, \"meters\");\r\n    const midpoint = geometryEngine.geodesicDensify(polyline, length / 2, \"meters\").getPoint(0, 0);\r\n    return midpoint;\r\n  },\r\n\r\n  _findMidpoint(polyline) {\r\n    const lengthPolylineChunk = geometryEngine.geodesicLength(polyline, \"meters\")\r\n    const line = turf.lineString(polyline.paths[0]);\r\n    const options = { units: 'meters' };\r\n    const along = turf.along(line, lengthPolylineChunk / 2, options);\r\n    return along\r\n  },\r\n\r\n  // funcion que recibe una polilinea con muchas partes y retorna la parte mas larga como una polilinea\r\n  _getLongestPolyline(polyline) {\r\n    const paths = polyline.paths\r\n    let longestPath = 0\r\n    let response = null;\r\n    for (let path of paths) {\r\n      let polylineChunk = new Polyline({\r\n        paths: [path],\r\n        spatialReference: { wkid: 4326 }\r\n      });\r\n      let lengthPolylineChunk = geometryEngine.geodesicLength(polylineChunk, \"meters\")\r\n      if (lengthPolylineChunk > longestPath) {\r\n        longestPath = lengthPolylineChunk\r\n        response = polylineChunk\r\n      }\r\n    }\r\n    return response\r\n  },\r\n\r\n  // --------------------------------------------------------------\r\n  // SUBDIVISION DE LOTES\r\n  // function that allows dividing a polygon from cutting lines, the parameters will be a polygon and several lines in json format\r\n  // the function must return a polygon json\r\n  // --------------------------------------------------------------\r\n  _dividePolygon(poly, lines) {\r\n    const divide = geometryEngine.cut(poly, lines);\r\n    const response = [];\r\n    for (let item of divide) {\r\n      item.rings.map((i) => {\r\n        const simplePolygon = new Polygon({\r\n          rings: [i],\r\n          spatialReference: item.spatialReference\r\n        });\r\n\r\n        // const simplePolygonG = webMercatorUtils.webMercatorToGeographic(simplePolygon);\r\n        response.push(simplePolygon);\r\n      });\r\n    };\r\n    return response;\r\n  },\r\n\r\n  _populateTableDrawLine(idLine) {\r\n    let row = `<td class=\"center-aligned\">${selfCm.idxLines}</td>\r\n              <td contenteditable=\"true\" id=\"${idLine}_name\">${idLine}</td>\r\n              <td class=\"center-aligned\">\r\n                <span id=\"${idLine}_ext\"><i class=\"fas fa-search\"></i></span>\r\n              </td>\r\n              <td class=\"center-aligned\">\r\n                <span id=\"${idLine}_del\" style=\"color: #FF5722;\"><i class=\"far fa-trash-alt\"></i></span>\r\n              </td>`\r\n    let tr = dojo.create('tr');\r\n    tr.id = idLine;\r\n    tr.innerHTML = row;\r\n    tr.style.cursor = \"pointer\";\r\n    selfCm.bodyTbLinesDvApCm.appendChild(tr)\r\n    dojo.query(`#${idLine}_del`).on('click', selfCm._deleteRowLine);\r\n    dojo.query(`#${idLine}_ext`).on('click', selfCm._zoonToLineDivision);\r\n    dojo.query(`#${idLine}_name`).on('input', selfCm._editaNameLineDivision);\r\n  },\r\n\r\n  _deleteRowLine(evt) {\r\n    let id = evt.currentTarget.id.replace('_del', '');\r\n    let elem = dojo.query(`#${id}`);\r\n    let graphic = graphicLayerLineaDivision.graphics.filter(item => item.attributes.id == id);\r\n    graphicLayerLineaDivision.remove(graphic[0])\r\n    let graphicLabel = graphicLayerLabelLineaDivision.graphics.filter(item => item.attributes.id == id);\r\n    graphicLayerLabelLineaDivision.remove(graphicLabel[0])\r\n    selfCm._removeLayerGraphic(idGraphicLoteCm)\r\n    selfCm._removeLayerGraphic(idGraphicPuntoLote)\r\n    selfCm._removeLayerGraphic(idGraphicFrenteLote)\r\n    selfCm._removeLayerGraphic(idGraphicLabelCodLote)\r\n    graphicLayerPredioByDivison.clear()\r\n    elem[0].parentNode.removeChild(elem[0]);\r\n  },\r\n\r\n  _addNameToLine(name, polylineGeom) {\r\n    let polylineGeomUtm = webMercatorUtils.webMercatorToGeographic(polylineGeom)\r\n    let midPoint = selfCm._findMidpoint(polylineGeomUtm)\r\n\r\n    let pointLabel = new Point({\r\n      x: midPoint.geometry.coordinates[0],\r\n      y: midPoint.geometry.coordinates[1],\r\n      spatialReference: { wkid: 4326 }\r\n    })\r\n\r\n    let font = new Font(\"15px\", Font.STYLE_NORMAL, Font.VARIANT_NORMAL, Font.WEIGHT_BOLD, \"Arial\");\r\n    let txtSym = new TextSymbol(name, font, new Color([250, 0, 0, 0.9]));\r\n    txtSym.setOffset(15, 15).setAlign(TextSymbol.ALIGN_END)\r\n    txtSym.setHaloColor(new Color([255, 255, 255]));\r\n    txtSym.setHaloSize(1.5);\r\n    let graphicLabel = new Graphic(pointLabel, txtSym, { id: name });\r\n\r\n    // graphicLayer.add(graphic);\r\n    graphicLayerLabelLineaDivision.add(graphicLabel);\r\n  },\r\n\r\n  _zoonToLineDivision(evt) {\r\n    let id = evt.currentTarget.id.replace('_ext', '');\r\n    let graphic = graphicLayerLabelLineaDivision.graphics.filter(item => item.attributes.id == id);\r\n    selfCm.map.setExtent(graphic[0]._extent, true);\r\n  },\r\n\r\n  _editaNameLineDivision(evt) {\r\n    let id = evt.currentTarget.id.replace('_name', '');\r\n    let graphic = graphicLayerLabelLineaDivision.graphics.filter(item => item.attributes.id == id)\r\n    graphic[0].symbol.text = evt.currentTarget.innerText;\r\n    graphicLayerLabelLineaDivision.refresh()\r\n  },\r\n\r\n  _populateTablePredio(bodyTable, drawFunction) {\r\n    bodyTable.innerHTML = ''\r\n    selfCm.responseRequests.forEach((predio, idx) => {\r\n      const tr = dojo.create('tr');\r\n      tr.id = `predio_${predio['id']}`;\r\n      const row = `<td class=\"center-aligned\">${idx + 1}</td>\r\n                  <td>${predio['address']}</td>\r\n                  <td class=\"center-aligned\">\r\n                   <span \r\n                    id=\"${tr.id}_draw\"\r\n                    data-cpm=${predio['cpm']} \r\n                    data-resolutionType=${predio['resolutionType']} \r\n                    data-resolutionDocument=${predio['resolutionDocument']}\r\n                    data-floor=${predio['floor']}\r\n                    data-urbanLotNumber=${predio['urbanLotNumber']}\r\n                   >\r\n                      <i class=\"fas fa-map-marker-alt\"></i>\r\n                   </span>\r\n                  </td>`\r\n      tr.innerHTML = row;\r\n      tr.style.cursor = \"pointer\";\r\n      bodyTable.appendChild(tr)\r\n      dojo.query(`#${tr.id}_draw`).on('click', drawFunction)\r\n    });\r\n  },\r\n\r\n  _activateSnappingPrediosByDivision(graphiclayer) {\r\n    let graphicsLayerInfo = new esri.layers.LayerInfo({\r\n      id: graphiclayer.id, // El id del `GraphicsLayer`\r\n      name: graphiclayer.name, // El nombre del `GraphicsLayer`\r\n      layer: graphiclayer // El `GraphicsLayer` a utilizar\r\n    });\r\n\r\n    // Agregar el `LayerInfo` al mapa y habilitar el snapping\r\n    selfCm.map.enableSnapping({\r\n      layerInfos: [graphicsLayerInfo], // Agregar el `LayerInfo` al mapa\r\n      // alwaysSnap: true,\r\n      snapPointSymbol: symbolSnapPointCm,\r\n      tolerance: 5,\r\n    });\r\n  },\r\n\r\n  _activateToolPrediosByDivision(evt) {\r\n    selfCm._removeClassActiveButton()\r\n    ToolDraw.deactivateToolbarAnotherToolbar();\r\n    selfCm.idButtonDrawActive = evt.currentTarget.id\r\n    dojo.query(`#${selfCm.idButtonDrawActive}`)[0].classList.add('activeButton')\r\n    selfCm.cpmPredioDivision = evt.currentTarget.dataset.cpm === 'null' ? null : evt.currentTarget.dataset.cpm;\r\n    selfCm.idPredioDivision = evt.currentTarget.parentElement.parentElement.id;\r\n    selfCm.resolutionType = evt.currentTarget.dataset.resolutiontype === 'null' ? null : evt.currentTarget.dataset.resolutiontype;\r\n    selfCm.resolutionDocument = evt.currentTarget.dataset.resolutiondocument === 'null' ? null : evt.currentTarget.dataset.resolutiondocument;\r\n    selfCm.floor = evt.currentTarget.dataset.floor === 'null' ? null : evt.currentTarget.dataset.floor;\r\n    selfCm.urbanLotNumber = evt.currentTarget.dataset.urbanlotnumber === 'null' ? null : evt.currentTarget.dataset.urbanlotnumber;\r\n    const graphic = graphicLayerPredioByDivison.graphics.filter(item => item.attributes.id === selfCm.idPredioDivision);\r\n    graphicLayerPredioByDivison.remove(graphic[0])\r\n    selfCm.map.setInfoWindowOnClick(false);\r\n    const graphicLayerPuntoLote = selfCm.map.getLayer(idGraphicPuntoLote)\r\n    selfCm._activateSnappingPrediosByDivision(graphicLayerPuntoLote);\r\n    toolbarCm.activate(Draw[\"POINT\"]);\r\n  },\r\n\r\n  _changeValueCodLote(evt) {\r\n    const selectedValue = evt.target.value;\r\n    const currentSelectId = evt.target.id;\r\n    const id = evt.target.id.split('_')[1]\r\n    // const idx = evt.target.selectedIndex\r\n    // const cod_lote = evt.target.value\r\n    const lyr = selfCm.map.getLayer(idGraphicLabelCodLote)\r\n    const graphicSelected = lyr.graphics.filter(item => item.attributes.id == `label_${id}`)\r\n    graphicSelected[0].symbol.text = selectedValue\r\n    const selects = dojo.query('.codLoteSelectDvCls');\r\n    selects.forEach(select => {\r\n      if (select.id !== currentSelectId && select.value === selectedValue) {\r\n        select.value = '';\r\n        const graphicNotSelected = lyr.graphics.filter(item => item.attributes.id == `label_${select.id.split('_')[1]}`)\r\n        graphicNotSelected[0].symbol.text = ''\r\n      }\r\n      lyr.refresh()\r\n    });\r\n  },\r\n\r\n  _changeLotUrb(evt) {\r\n    const selectedValue = evt.target.value;\r\n    const currentSelectId = evt.target.id;\r\n    const selects = dojo.query('.loteUrbSelectDvCls');\r\n    const lyr = selfCm.map.getLayer(idGraphicLabelCodLote)\r\n    // const graphicSelected = lyr.graphics.filter(item => item.attributes.id == `label_${id}`)\r\n    selects.forEach(select => {\r\n      if (select.id !== currentSelectId && select.value === selectedValue) {\r\n        select.value = '';\r\n        const graphicNotSelected = lyr.graphics.filter(item => item.attributes.id == `label_${select.id.split('_')[1]}`)\r\n        graphicNotSelected[0].attributes.lot_urb = ''\r\n      }\r\n    });\r\n  },\r\n\r\n  _centerAtLabelCodLoteDivision(evt) {\r\n    let id = evt.currentTarget.id\r\n    let lyr = selfCm.map.getLayer(idGraphicLabelCodLote)\r\n    let graphicSelected = lyr.graphics.filter(item => item.attributes.id == id)\r\n    selfCm.map.centerAndZoom(graphicSelected[0].geometry)\r\n  },\r\n\r\n  _editLoteUrbanoDivision(evt) {\r\n    const id = evt.target.id.replace('loteUrbanoDv_', '');\r\n    const lyr = selfCm.map.getLayer(idGraphicLabelCodLote)\r\n    const graphic = lyr.graphics.filter(item => item.attributes.id == `label_${id}`)\r\n    graphic[0].attributes.lot_urb = evt.target.selectedOptions[0].value\r\n    lyr.refresh()\r\n  },\r\n\r\n  _buildDataLoteTable(tableBody, predios) {\r\n    tableBody.innerHTML = ''\r\n    predios.forEach((predio, index) => {\r\n      const row = document.createElement('tr');\r\n\r\n      // celda de índice\r\n      const indexCell = document.createElement('td');\r\n      indexCell.className = \"center-aligned\"\r\n      indexCell.textContent = predio.num;\r\n      row.appendChild(indexCell);\r\n\r\n      // celda de codigo de predio\r\n      const codigoCell = document.createElement('td');\r\n      const select = document.createElement('select');\r\n      select.className = \"codLoteSelectDvCls\"\r\n      select.id = `codLoteSelectDv_${predio.num}`\r\n\r\n      const optionDisabled = document.createElement('option');\r\n      optionDisabled.value = '';\r\n      optionDisabled.textContent = '---';\r\n      optionDisabled.disabled = true;\r\n      select.appendChild(optionDisabled);\r\n      predios.forEach(p => {\r\n        const option = document.createElement('option');\r\n        option.value = p.cod_lote;\r\n        option.textContent = p.cod_lote;\r\n        if (p.cod_lote === predio.cod_lote) {\r\n          option.selected = true;\r\n        }\r\n        select.appendChild(option);\r\n      });\r\n\r\n      codigoCell.appendChild(select);\r\n      row.appendChild(codigoCell);\r\n\r\n\r\n      const loteUrbCell = document.createElement('td');\r\n      const loteUrbSelect = document.createElement('select');\r\n      loteUrbSelect.className = \"loteUrbSelectDvCls\"\r\n      loteUrbSelect.id = `loteUrbanoDv_${predio.num}`\r\n\r\n      const optionDisabledLotUrb = optionDisabled.cloneNode(true)\r\n      loteUrbSelect.appendChild(optionDisabledLotUrb);\r\n\r\n      selfCm.responseRequests.forEach((request, idx) => {\r\n        const option = document.createElement('option');\r\n        option.value = request.urbanLotNumber;\r\n        option.textContent = request.urbanLotNumber;\r\n        loteUrbSelect.appendChild(option);\r\n        if (predio.num == idx + 1) {\r\n          option.selected = true;\r\n        }\r\n        // selected option by index predio.num\r\n      })\r\n      loteUrbCell.appendChild(loteUrbSelect);\r\n      loteUrbCell.className = \"loteUrbanoDvCls\"\r\n      row.appendChild(loteUrbCell);\r\n\r\n      const locationMarker = document.createElement('td');\r\n      locationMarker.id = predio.id\r\n      locationMarker.className = \"center-aligned\"\r\n      locationMarker.innerHTML = `<span class=\"locationLabelLoteDvCls\" id=\"${predio.id}\"><i class=\"fas fa-search\"></i></span>`\r\n      row.appendChild(locationMarker);\r\n      tableBody.appendChild(row);\r\n      // dojo.query(`#${predio.id}`).on('click', selfCm._centerAtLabelCodLoteDivision)\r\n\r\n    });\r\n    dojo.query('.codLoteSelectDvCls').on('change', selfCm._changeValueCodLote)\r\n    dojo.query('.loteUrbSelectDvCls').on('change', selfCm._changeLotUrb)\r\n    dojo.query('.locationLabelLoteDvCls').on('click', selfCm._centerAtLabelCodLoteDivision)\r\n    dojo.query('.loteUrbanoDvCls').on('change', selfCm._editLoteUrbanoDivision);\r\n\r\n  },\r\n\r\n  _ordenarPoligonosNorteSur(poligonos, idx, bodyTable) {\r\n    const deferred = new Deferred();\r\n    // Obtener la coordenada más al norte de cada polígono\r\n    const coordenadasNorte = poligonos.map(poligono => {\r\n      const extent = poligono.getExtent();\r\n      return extent.ymax;\r\n    });\r\n\r\n    // Ordenar los polígonos en base a la coordenada más al norte\r\n    const poligonosOrdenados = poligonos.slice().sort((a, b) => {\r\n      const coordenadaNorteA = coordenadasNorte[poligonos.indexOf(a)];\r\n      const coordenadaNorteB = coordenadasNorte[poligonos.indexOf(b)];\r\n      return coordenadaNorteB - coordenadaNorteA; // Ordenar de norte a sur\r\n    });\r\n\r\n    // console.log(poligonos)\r\n\r\n    const graphicLayerLabelCodLoteDivision = new GraphicsLayer({\r\n      id: idGraphicLabelCodLote,\r\n    });\r\n\r\n    const font = new Font(\"20px\", Font.STYLE_NORMAL, Font.VARIANT_NORMAL, Font.WEIGHT_BOLD, \"Arial\");\r\n\r\n    const dataLoteTable = []\r\n\r\n    selfCm.geometryService.labelPoints(poligonosOrdenados)\r\n      .then((labelPoints) => {\r\n        labelPoints.forEach((point, index) => {\r\n          const cod_lote = selfCm._zfill(idx + 1, 3)\r\n          const txtSym = new TextSymbol(cod_lote, font, new Color([250, 0, 0, 1]));\r\n          txtSym.setColor(new esri.Color([0, 0, 0, 1])); // color blanco\r\n          txtSym.setSize(\"12pt\");\r\n          txtSym.setHaloColor(new esri.Color([255, 255, 255, 1]));\r\n          txtSym.setHaloSize(2);\r\n          const idGraphic = `label_${index + 1}`\r\n          const graphicLabel = new Graphic(\r\n            point,\r\n            txtSym,\r\n            {\r\n              id: idGraphic,\r\n              lot_urb: selfCm.responseRequests[index].urbanLotNumber,\r\n              clase: 'labelCodLoteDivision'\r\n            });\r\n          graphicLayerLabelCodLoteDivision.add(graphicLabel);\r\n          dataLoteTable.push({ num: index + 1, id: idGraphic, cod_lote: cod_lote })\r\n          idx = idx + 1\r\n        });\r\n        return dataLoteTable\r\n      })\r\n      .then((dataLoteTable) => {\r\n        selfCm._buildDataLoteTable(bodyTable, dataLoteTable)\r\n        selfCm.map.addLayer(graphicLayerLabelCodLoteDivision)\r\n        return deferred.resolve(dataLoteTable);\r\n      })\r\n      .catch((error) => {\r\n        return deferred.reject(error);\r\n      });\r\n\r\n    return deferred.promise;\r\n  },\r\n\r\n  // _enableEditingLabelsLotesDivision(evt) {\r\n  //   if (evt && evt.graphic && evt.graphic.attributes && evt.graphic.attributes.clase == 'labelCodLoteDivision') {\r\n  //     selfCm.map.setInfoWindowOnClick(false)\r\n  //     selfCm.editToolbar.activate(Edit.MOVE, evt.graphic);\r\n  //   } else {\r\n  //     selfCm.editToolbar.deactivate()\r\n  //   }\r\n  // },\r\n\r\n  _zfill(num, len) {\r\n    return (Array(len).fill('0').join('') + num).slice(-len);\r\n  },\r\n\r\n  _getMaxCodLot(polygonos) {\r\n    const deferred = new Deferred();\r\n    const estadisticaDef = new StatisticDefinition();\r\n    estadisticaDef.statisticType = 'max';\r\n    estadisticaDef.onStatisticField = _COD_LOTE_FIELD;\r\n    estadisticaDef.outStatisticFieldName = \"resultado\";\r\n\r\n    const query = new Query();\r\n    query.where = selfCm.arancel;\r\n    query.outFields = [_COD_LOTE_FIELD];\r\n    query.returnGeometry = false;\r\n    query.outStatistics = [estadisticaDef];\r\n\r\n    const queryTask = new QueryTask(selfCm.layersMap.getLayerInfoById(idLyrCfLotes).getUrl());\r\n    queryTask.execute(query)\r\n      .then(result => {\r\n        if (result.features.length > 0) {\r\n          const maxCodLote = result.features[0].attributes.resultado;\r\n          return deferred.resolve({\r\n            maxCodLote: maxCodLote,\r\n            polygons: polygonos\r\n          });\r\n        } else {\r\n          return deferred.reject('No se encontraron lotes');\r\n        }\r\n      });\r\n    return deferred.promise;\r\n  },\r\n\r\n  _getOriginalLots(query) {\r\n    const selfCm = this;\r\n    const deferred = new Deferred();\r\n    const params = {\r\n      where: query,\r\n      returnGeometry: true,\r\n      outFields: \"*\",\r\n      outSR: 4326,\r\n      f: \"json\"\r\n    };\r\n\r\n    const requestOptions = {\r\n      url: `${selfCm.layersMap.getLayerInfoById(idLyrCfLotes).getUrl()}/query`,\r\n      content: params,\r\n      handleAs: \"json\",\r\n      callbackParamName: \"callback\"\r\n    };\r\n\r\n    esriRequest(requestOptions, { usePost: true })\r\n      .then((response) => {\r\n        selfCm.currentLotsRows = response.features;\r\n\r\n        if (selfCm.case == 2) {\r\n          if (selfCm.currentLotsRows.length < 2) {\r\n            throw new Error(selfCm.nls.errorAcumulationLandsNumber);\r\n          }\r\n        }\r\n\r\n        selfCm.currentLotsRows.forEach(row => {\r\n          row.geometry = new Polygon({\r\n            rings: row.geometry.rings,\r\n            spatialReference: { wkid: 4326 }\r\n          });\r\n        });\r\n        return deferred.resolve(selfCm.currentLotsRows);\r\n      })\r\n      .catch(err => deferred.reject(err));\r\n\r\n    return deferred.promise;\r\n  },\r\n\r\n  _getPolylinesDrawn() {\r\n    const arr = []\r\n    for (let i of graphicLayerLineaDivision.graphics) {\r\n      arr.push(i.geometry);\r\n    }\r\n    const unionGraphicLayerLineaDivision = selfCm._unionFeatures(arr);\r\n\r\n    let lineGeometry = new Polyline({\r\n      paths: unionGraphicLayerLineaDivision.paths,\r\n      spatialReference: { wkid: 102100 }\r\n    });\r\n    lineGeometry = esri.geometry.webMercatorToGeographic(lineGeometry);\r\n    return lineGeometry;\r\n  },\r\n\r\n  _divideLotsByLines() {\r\n    // const geomLote = results.features[0].geometry\r\n    if (selfCm.currentLotsRows.length == 0) {\r\n      selfCm._showMessage(selfCm.nls.errorLotQuery, 'warning');\r\n      return;\r\n    }\r\n    const lineGeometry = selfCm._getPolylinesDrawn();\r\n\r\n    const polygonGeometry = selfCm.currentLotsRows[0].geometry;\r\n\r\n    const geomLoteDivided = selfCm._dividePolygon(polygonGeometry, lineGeometry)\r\n\r\n    if (geomLoteDivided.length == 0) {\r\n      //  genera un mensage show indicando que no se encontro el lote\r\n      throw new Error(selfCm.nls.errorDivideLot);\r\n      // selfCm._showMessage(selfCm.nls.errorDivideLot, type = 'error');\r\n      // return;\r\n    }\r\n\r\n    if (geomLoteDivided.length != selfCm.responseRequests.length) {\r\n      throw new Error(`No se puede proceder con la operación\\nLa cantidad de lotes generados (${geomLoteDivided.length}) es diferente a lo solicitado (${selfCm.responseRequests.length})`);\r\n      // selfCm._showMessage(`No se puede proceder con la operación\\nSe han generado más lotes (${geomLoteDivided.length}) de los solicitados (${selfCm.responseRequests.length})`, type = 'error');\r\n      // return;\r\n    }\r\n\r\n    // Creamos grafico de lote fusionado\r\n    const graphicLayerLoteDivision = new GraphicsLayer({\r\n      id: idGraphicLoteCm\r\n    });\r\n\r\n    // // Configurar el LabelClass con un símbolo transparente\r\n    // const labelClass = new LabelClass({\r\n    //   labelExpressionInfo: { value: \"-\" },\r\n    //   useCodedValues: false,\r\n    //   labelPlacement: \"always-horizontal\",\r\n    //   symbol: new TextSymbol().setColor(new Color([0, 0, 0])) // Color transparente\r\n    // });\r\n\r\n    // console.log(graphicLayerLoteDivision);\r\n    // graphicLayerLoteDivision.setLabelingInfo([labelClass]);\r\n\r\n    // iterar sobre los graficos de la capa de division y agregar cada uno a graphicLayerLoteDivision\r\n    for (let i of geomLoteDivided) {\r\n      const lote = new Graphic(i, symbolFusionLote)\r\n\r\n      // agregar el grafico directo al mapa\r\n      graphicLayerLoteDivision.add(lote);\r\n    }\r\n    selfCm.map.addLayer(graphicLayerLoteDivision);\r\n    return geomLoteDivided;\r\n  },\r\n\r\n  _addGraphicsPointLotsAndArancel() {\r\n    const deferred = new Deferred();\r\n    const query = new Query();\r\n    query.where = `${selfCm.arancel} and ID_SVIA IS NOT NULL`\r\n    // especificar los campos devueltos\r\n    query.outFields = [_UBIGEO_FIELD, _F_MZN_FIELD];\r\n    query.returnGeometry = true\r\n    // query with order by fields\r\n    query.orderByFields = [_F_MZN_FIELD];\r\n    const qTask = new QueryTask(selfCm.layersMap.getLayerInfoById(idLyrCfArancel).getUrl());\r\n    qTask.execute(query, function (results) {\r\n      // Creamos grafico de punto lote\r\n      const graphicLayerPuntoLote = new GraphicsLayer({\r\n        id: idGraphicPuntoLote\r\n      });\r\n      // creamos grafico de frente de lote\r\n      const graphicLayerFrenteLote = new GraphicsLayer({\r\n        id: idGraphicFrenteLote\r\n      });\r\n      // let graphicLayerPredio = new GraphicsLayer({\r\n      //   id: idGraphicPredioCm\r\n      // });\r\n      const graphicLoteDivision = selfCm.map.getLayer(idGraphicLoteCm)\r\n      if (!graphicLoteDivision) {\r\n        return;\r\n      }\r\n      const frentes = {}\r\n      for (let row of results.features) {\r\n        for (let graphic of graphicLoteDivision.graphics) {\r\n          const isItc = geometryEngine.intersects(row.geometry, graphic.geometry)\r\n          if (!isItc) {\r\n            continue\r\n          }\r\n          // saber si un key esta dentro del objeto frentes\r\n          if (!frentes.hasOwnProperty(row.attributes[_F_MZN_FIELD])) {\r\n            frentes[row.attributes[_F_MZN_FIELD]] = row.geometry;\r\n          }\r\n          else {\r\n            // check if row.geometry share a commin coordinate with frentes\r\n            const unionFrentes = geometryEngine.union([frentes[row.attributes[_F_MZN_FIELD]], row.geometry])\r\n            frentes[row.attributes[_F_MZN_FIELD]] = unionFrentes;\r\n          }\r\n        }\r\n      }\r\n\r\n      for (let lote of graphicLoteDivision.graphics) {\r\n        for (let idx in frentes) {\r\n          const idItcFrentesByLotes = geometryEngine.intersects(lote.geometry, frentes[idx])\r\n          if (!idItcFrentesByLotes) {\r\n            continue\r\n          }\r\n          const itcFrentesByLotes = geometryEngine.intersect(frentes[idx], lote.geometry)\r\n          for (let row of itcFrentesByLotes.paths) {\r\n            const polylineChunk = new Polyline({\r\n              paths: [row],\r\n              spatialReference: itcFrentesByLotes.spatialReference\r\n            });\r\n            // add frentes to graphicLayerFrenteLote\r\n            const symbolFrenteLote = new SimpleLineSymbol(\r\n              SimpleLineSymbol.STYLE_SOLID,\r\n              new Color(\r\n                [\r\n                  Math.floor(Math.random() * 255),\r\n                  Math.floor(Math.random() * 255),\r\n                  Math.floor(Math.random() * 255)]),\r\n              5\r\n            )\r\n            const frente = new Graphic(polylineChunk, symbolFrenteLote)\r\n            graphicLayerFrenteLote.add(frente);\r\n\r\n            const puntoLoteTurf = selfCm._findMidpoint(polylineChunk)\r\n\r\n            // crear un punto en el mapa\r\n            const puntoLote = new Point({\r\n              x: puntoLoteTurf.geometry.coordinates[0],\r\n              y: puntoLoteTurf.geometry.coordinates[1],\r\n              spatialReference: { wkid: 4326 }\r\n            })\r\n\r\n            // Agregar el punto p al mapa          \r\n            const puntoLoteGraphic = new Graphic(puntoLote, symbolPuntoLote)\r\n            graphicLayerPuntoLote.add(puntoLoteGraphic)\r\n          };\r\n        }\r\n      }\r\n      selfCm.map.addLayer(graphicLayerFrenteLote);\r\n      selfCm.map.addLayer(graphicLayerPuntoLote);\r\n      selfCm._removeLayerGraphic(idGraphicPredioByDivison);\r\n      selfCm.map.addLayer(graphicLayerPredioByDivison)\r\n      return deferred.resolve();\r\n    });\r\n    return deferred.promise;\r\n  },\r\n\r\n  _ApplyDivideLotesRefactor() {\r\n    selfCm.busyIndicator.show();\r\n    selfCm._removeLayerGraphic(idGraphicPredioCm);\r\n    selfCm._removeLayerGraphic(idGraphicLoteCm);\r\n    selfCm._removeLayerGraphic(idGraphicPuntoLote);\r\n    selfCm._removeLayerGraphic(idGraphicFrenteLote);\r\n    selfCm._removeLayerGraphic(idGraphicLoteDeleteCm);\r\n    selfCm._removeLayerGraphic(idGraphicLabelCodLote);\r\n\r\n    // Union all graphics of graphicslayer\r\n    if (graphicLayerLineaDivision.graphics.length == 0) {\r\n      selfCm._showMessage(selfCm.nls.emptyLineSubdivision, 'warning');\r\n      selfCm.busyIndicator.hide();\r\n      return\r\n    }\r\n    if (!selfCm.lotesQuery) {\r\n      selfCm._showMessage(selfCm.nls.errorGetLand, 'warning');\r\n      selfCm.busyIndicator.hide();\r\n      return\r\n    }\r\n    return selfCm._getOriginalLots(selfCm.lotesQuery)\r\n      .then(originLots => {\r\n        const geomLoteDivided = selfCm._divideLotsByLines();\r\n        return selfCm._getMaxCodLot(geomLoteDivided);\r\n      })\r\n      .then(proprsLot => {\r\n        return selfCm._ordenarPoligonosNorteSur(\r\n          proprsLot.polygons,\r\n          parseInt(proprsLot.maxCodLote),\r\n          selfCm.bodyTbDatosLoteDvApCm\r\n        )\r\n      })\r\n      .then(() => {\r\n        selfCm.map.reorderLayer(selfCm.map.getLayer(idGraphicLoteCm), selfCm.map.graphicsLayerIds.indexOf(graphicLayerLabelLineaDivision.id));\r\n        selfCm.map.setExtent(selfCm.currentLotsRows[0].geometry.getExtent().expand(1.5), true);\r\n        return selfCm._addGraphicsPointLotsAndArancel();\r\n      })\r\n      .then(() => {\r\n        selfCm._populateTablePredio(selfCm.bodyTbPrediosDvApCm, selfCm._activateToolPrediosByDivision)\r\n        selfCm.busyIndicator.hide();\r\n      })\r\n      .catch(error => {\r\n        // console.log(error)\r\n        selfCm.busyIndicator.hide();\r\n        selfCm._showMessage(error.message, type = \"error\")\r\n      })\r\n  },\r\n\r\n  // // ----------------------------------------------------------------------------------------------\r\n  // // GeoprocessingServices\r\n  // // ----------------------------------------------------------------------------------------------\r\n  // _executeReasignacionGpService(evt) {\r\n  //   if (!selfCm.xy.length) {\r\n  //     selfCm._showMessage(selfCm.nls.emptyNewLocation, type = \"error\")\r\n  //     return\r\n  //   }\r\n  //   selfCm._showMessageConfirm().then(function (result) {\r\n  //     if (result) {\r\n  //       let params = {\r\n  //         \"cod_pred\": selfCm.uniqueCodeLands,\r\n  //         \"ubigeo\": paramsApp['ubigeo'],\r\n  //         \"geometry\": selfCm.xy,\r\n  //         \"user\": paramsApp['username'],\r\n  //         \"id_solicitud\": selfCm.codRequestsCm\r\n  //       }\r\n\r\n  //       // revisar si alguna propiedad tiene valor nulo o indefinido\r\n  //       for (let key in params) {\r\n  //         if (params[key] == null || params[key] == undefined) {\r\n  //           selfCm._showMessage(`Debe especificar el valor de ${key}`, type = \"error\");\r\n  //           return\r\n  //         }\r\n  //       }\r\n  //       selfCm._executeGPService(selfCm.config.reasignacionUrl, params)\r\n  //     }\r\n  //     else {\r\n  //       return\r\n  //     }\r\n  //   })\r\n  // },\r\n\r\n  _executeAcumulacionGpService(evt) {\r\n    if (!selfCm.lotesQuery) {\r\n      selfCm._showMessage(selfCm.nls.errorGetLand, 'warning');\r\n      selfCm.busyIndicator.hide();\r\n      return\r\n    }\r\n    if (!selfCm.map.getLayer(idGraphicLoteCm)) {\r\n      selfCm._showMessage(selfCm.nls.emptyPreviewAccumulation, type = \"error\")\r\n      return\r\n    }\r\n\r\n    if (!selfCm.xy.length) {\r\n      selfCm._showMessage(selfCm.nls.emptyNewLand, type = \"error\")\r\n      return\r\n    }\r\n    const labelCodLotesLayer = selfCm.map.getLayer(idGraphicLabelCodLote)\r\n\r\n    selfCm._showMessageConfirm().then(function (result) {\r\n      if (result) {\r\n        selfCm.busyIndicator.show();\r\n        selfCm._addWarningMessageExecute()\r\n        const labelCodLotesLayerGraphic = labelCodLotesLayer.graphics;\r\n\r\n        Acumulation.codRequests = selfCm.codRequestsCm;\r\n        Acumulation.currentLotsRows = selfCm.currentLotsRows;\r\n\r\n        Acumulation.attributes = labelCodLotesLayerGraphic.map((i) => {\r\n          return {\r\n            codLot: i.symbol.text,\r\n            lotUrb: i.attributes.lot_urb,\r\n            coords: [\r\n              i.geometry.x,\r\n              i.geometry.y\r\n            ]\r\n          }\r\n        });\r\n\r\n        Acumulation.newPointLotsGraphics = selfCm.map.getLayer(idGraphicPuntoLote).graphics;\r\n        Acumulation.newLandsGraphics = selfCm.map.getLayer(idGraphicPredioCm).graphics;\r\n        Acumulation.newLandsGraphics[0]['codPre'] = selfCm.cpmAcumulacion;\r\n        Acumulation.newLandsGraphics[0]['id'] = selfCm.idAcumulacion;\r\n        Acumulation.newLandsGraphics[0]['resolutionType'] = selfCm.resolutionType;\r\n        Acumulation.newLandsGraphics[0]['resolutionDocument'] = selfCm.resolutionDocument;\r\n        Acumulation.newLandsGraphics[0]['floor'] = selfCm.floor;\r\n        Acumulation.newLandsGraphics[0]['urbanLotNumber'] = selfCm.urbanLotNumber;\r\n        Acumulation.landUrl = selfCm.layersMap.getLayerInfoById(idLyrCfPredios).getUrl();\r\n        Acumulation.pointLotUrl = selfCm.layersMap.getLayerInfoById(idLyrCfLotesPun).getUrl();\r\n        Acumulation.lotUrl = selfCm.layersMap.getLayerInfoById(idLyrCfLotes).getUrl();\r\n        Acumulation.arancelUrl = selfCm.layersMap.getLayerInfoById(idLyrCfArancel).getUrl();\r\n        Acumulation.blockUrl = selfCm.layersMap.getLayerInfoById(idLyrCfManzanaUrb).getUrl();\r\n        Acumulation.cadastralBlockUrl = selfCm.layersMap.getLayerInfoById(idLyrCfManzana).getUrl();\r\n        Acumulation.config = selfCm.config;\r\n        Acumulation.lotGraphic = selfCm.map.getLayer(idGraphicLoteCm).graphics;\r\n        Acumulation.ubigeo = paramsApp['ubigeo'];\r\n        Acumulation.user = paramsApp['username'];\r\n        Acumulation.caseRequest = selfCm.case;\r\n        Acumulation.queryBlock = selfCm.arancel;\r\n        Acumulation.queryLots = selfCm.lotesQuery;\r\n\r\n\r\n        Acumulation.executeAcumulation()\r\n          .then(response => {\r\n            selfCm._removeLayerGraphic(idGraphicPredioCm);\r\n            selfCm._removeLayerGraphic(idGraphicLoteCm);\r\n            selfCm._removeLayerGraphic(idGraphicPuntoLote);\r\n            selfCm._removeLayerGraphic(idGraphicFrenteLote);\r\n            selfCm._removeLayerGraphic(idGraphicLabelCodLote);\r\n            selfCm._refreshLayersCF();\r\n            // selfCm.map.getLayer(idLyrCatastroFiscal).setVisibility(false)\r\n            // selfCm.map.getLayer(idLyrCatastroFiscal).setVisibility(true)\r\n            selfCm._FormResult(selfCm.codRequestsCm, selfCm.caseDescription);\r\n            selfCm.busyIndicator.hide();\r\n            selfCm._removeWarningMessageExecute()\r\n            selfCm._showMessage(selfCm.nls.successProcess, type = \"success\");\r\n          })\r\n          .catch(error => {\r\n            // console.log(error)\r\n            // selfCm._removeWarningMessageExecute()\r\n            // selfCm._showMessage(error.message, type = \"error\");\r\n            // selfCm.busyIndicator.hide();\r\n\r\n            selfCm._removeWarningMessageExecute()\r\n            selfCm.busyIndicator.hide();\r\n            if (error.name === CustomException.ErrorEqualUrbanLotWithinBlock.name) {\r\n              return\r\n            } else {\r\n              selfCm._showMessage(error.message, type = \"error\");\r\n            }\r\n          })\r\n        // .finally(() => {\r\n        //   selfCm.lotesQuery = null;\r\n        // })\r\n      }\r\n      else {\r\n        selfCm.busyIndicator.hide();\r\n        return\r\n      }\r\n    })\r\n  },\r\n\r\n  _executeSubdivisionGpService(evt) {\r\n\r\n    const layerLote = selfCm.map.getLayer(idGraphicLoteCm);\r\n\r\n    if (!selfCm.lotesQuery) {\r\n      selfCm._showMessage(selfCm.nls.errorGetLand, 'warning');\r\n      selfCm.busyIndicator.hide();\r\n      return;\r\n    };\r\n\r\n    if (!layerLote) {\r\n      selfCm._showMessage(selfCm.nls.emptyPreviewSubdivision, type = \"error\");\r\n      return;\r\n    };\r\n\r\n    // Check if all labels have a value\r\n    const labelCodLotesLayer = selfCm.map.getLayer(idGraphicLabelCodLote);\r\n    for (let pred of labelCodLotesLayer.graphics) {\r\n      if (!pred.symbol.text) {\r\n        selfCm._showMessage(selfCm.nls.emptyLotCodeSubdivision, type = \"error\");\r\n        return;\r\n      };\r\n      if (!pred.attributes.lot_urb || pred.attributes.lot_urb === \"...\") {\r\n        selfCm._showMessage(selfCm.nls.emptyUrbanLotSubdivision, type = \"error\");\r\n        return;\r\n      };\r\n    };\r\n\r\n    if (graphicLayerPredioByDivison.graphics.length != layerLote.graphics.length) {\r\n      selfCm._showMessage(selfCm.nls.emptyGraphicLandSubdivision, type = \"error\");\r\n      return;\r\n    };\r\n    // Check if all lots have a land\r\n    const checkLotsWithinLands = UtilityCase.checkLotsWithinLands(layerLote.graphics, graphicLayerPredioByDivison.graphics);\r\n    if (!checkLotsWithinLands) {\r\n      selfCm._showMessage(selfCm.nls.emptyLandResultSubdivision, type = \"error\");\r\n      return\r\n    };\r\n\r\n    // Check lotUrb\r\n    const lotUrbArray = labelCodLotesLayer.graphics.map(i => i.attributes.lot_urb);\r\n    const duplicateLotUrban = UtilityCase.checkDuplicateLotUrbanResults(lotUrbArray);\r\n    if (duplicateLotUrban.length > 0) {\r\n      selfCm._showMessage(`${selfCm.nls.duplicateLotUrbanResult}: ${duplicateLotUrban}`, type = 'error');\r\n      return;\r\n    };\r\n\r\n    selfCm._showMessageConfirm().then(function (result) {\r\n      if (result) {\r\n        selfCm.busyIndicator.show();\r\n        selfCm._addWarningMessageExecute();\r\n        const labelCodLotesLayerGraphic = labelCodLotesLayer.graphics;\r\n\r\n        SubDivision.blockUrl = selfCm.layersMap.getLayerInfoById(idLyrCfManzanaUrb).getUrl();\r\n        SubDivision.lotUrl = selfCm.layersMap.getLayerInfoById(idLyrCfLotes).getUrl();\r\n        SubDivision.pointLotUrl = selfCm.layersMap.getLayerInfoById(idLyrCfLotesPun).getUrl();\r\n        SubDivision.arancelUrl = selfCm.layersMap.getLayerInfoById(idLyrCfArancel).getUrl();\r\n        SubDivision.landUrl = selfCm.layersMap.getLayerInfoById(idLyrCfPredios).getUrl();\r\n        SubDivision.cadastralBlockUrl = selfCm.layersMap.getLayerInfoById(idLyrCfManzana).getUrl();\r\n        SubDivision.currentLotsRows = selfCm.currentLotsRows;\r\n        SubDivision.newPointLotsGraphics = selfCm.map.getLayer(idGraphicPuntoLote).graphics;\r\n        SubDivision.newLandsGraphics = graphicLayerPredioByDivison.graphics;\r\n        SubDivision.queryBlock = selfCm.arancel;\r\n        SubDivision.newLandsGraphics.forEach((i) => {\r\n          i['id'] = i.attributes.id.split('_')[1],\r\n            i['codPre'] = i.attributes.cpm,\r\n            i['resolutionType'] = i.attributes.resolutionType,\r\n            i['resolutionDocument'] = i.attributes.resolutionDocument,\r\n            i['floor'] = i.attributes.floor,\r\n            i['urbanLotNumber'] = i.attributes.urbanLotNumber\r\n        });\r\n        SubDivision.lotGraphic = layerLote.graphics;\r\n\r\n        SubDivision.attributes = labelCodLotesLayerGraphic.map((i) => {\r\n          return {\r\n            codLot: i.symbol.text,\r\n            lotUrb: i.attributes.lot_urb,\r\n            coords: [\r\n              i.geometry.x,\r\n              i.geometry.y\r\n            ]\r\n          }\r\n        });\r\n\r\n        SubDivision.config = selfCm.config;\r\n        SubDivision.ubigeo = paramsApp['ubigeo'];\r\n        SubDivision.user = paramsApp['username'];\r\n        SubDivision.caseRequest = selfCm.case;\r\n        SubDivision.codRequests = selfCm.codRequestsCm;\r\n        SubDivision.queryLots = selfCm.lotesQuery;\r\n\r\n        SubDivision.executeSubdivision()\r\n          .then(response => {\r\n            graphicLayerPredioByDivison.clear();\r\n            graphicLayerLineaDivision.clear();\r\n            graphicLayerLabelLineaDivision.clear();\r\n            selfCm._removeLayerGraphic(idGraphicLoteCm);\r\n            selfCm._removeLayerGraphic(idGraphicPuntoLote);\r\n            selfCm._removeLayerGraphic(idGraphicFrenteLote);\r\n            selfCm._removeLayerGraphic(idGraphicLabelCodLote);\r\n            // selfCm.map.getLayer(idLyrCatastroFiscal).setVisibility(false)\r\n            // selfCm.map.getLayer(idLyrCatastroFiscal).setVisibility(true)\r\n            selfCm._refreshLayersCF();\r\n            selfCm._FormResult(selfCm.codRequestsCm, selfCm.caseDescription);\r\n            selfCm.busyIndicator.hide();\r\n            selfCm._removeWarningMessageExecute()\r\n            selfCm._showMessage(selfCm.nls.successProcess, type = \"success\");\r\n          })\r\n          .catch(error => {\r\n            selfCm._removeWarningMessageExecute()\r\n            selfCm.busyIndicator.hide();\r\n            if (error.name === CustomException.ErrorEqualUrbanLotWithinBlock.name) {\r\n              return\r\n            } else {\r\n              selfCm._showMessage(error.message, type = \"error\");\r\n            }\r\n          })\r\n        // .finally(() => {\r\n        //   selfCm.lotesQuery = null;\r\n        // })\r\n      }\r\n      else {\r\n        return\r\n      }\r\n    })\r\n  },\r\n\r\n  _executeInactivarGpService(evt) {\r\n    if (!selfCm.currentLotsRows) {\r\n      selfCm._showMessage(selfCm.nls.emptyLotRequests, type = \"error\")\r\n      return\r\n    }\r\n\r\n    selfCm._showMessageConfirm().then(function (result) {\r\n      if (result) {\r\n        selfCm.busyIndicator.show();\r\n        selfCm._addWarningMessageExecute();\r\n        Deactivate.caseRequest = selfCm.case;\r\n        Deactivate.codRequest = selfCm.codRequestsCm;\r\n        Deactivate.user = paramsApp['username'];\r\n        Deactivate.ubigeo = paramsApp['ubigeo'];\r\n        Deactivate.config = selfCm.config;\r\n        Deactivate.landUrl = selfCm.layersMap.getLayerInfoById(idLyrCfPredios).getUrl();\r\n        Deactivate.cpu = selfCm.uniqueCodeLands;\r\n        Deactivate.currentLotsRows = selfCm.currentLotsRows;\r\n\r\n        Deactivate.executeDeactivate()\r\n          .then(response => {\r\n            // selfCm.map.getLayer(idLyrCatastroFiscal).setVisibility(false)\r\n            // selfCm.map.getLayer(idLyrCatastroFiscal).setVisibility(true)\r\n            selfCm._refreshLayersCF();\r\n            selfCm._removeWarningMessageExecute()\r\n            selfCm._loadIniRequestsCm()\r\n            dojo.query(\".backTrayClsCm\")[0].click()\r\n            selfCm.busyIndicator.hide();\r\n            selfCm._showMessage(selfCm.nls.successProcess, type = \"success\");\r\n          })\r\n          .catch(error => {\r\n            selfCm._removeWarningMessageExecute()\r\n            selfCm._showMessage(error.message, type = \"error\");\r\n            selfCm.busyIndicator.hide();\r\n          })\r\n          .finally(() => {\r\n            selfCm.currentLotsRows = null;\r\n          })\r\n      }\r\n      else {\r\n        return\r\n      }\r\n    })\r\n  },\r\n\r\n  _addWarningMessageExecute() {\r\n    const self = this;\r\n    const buzyElm = dojo.query(\"#dojox_widget_Standby_0\")[0]\r\n    const imgElm = buzyElm.querySelector(\"img\")\r\n    const loadingText = document.createElement('div');\r\n    loadingText.id = 'loadingTextCustom';\r\n    loadingText.style.position = 'absolute';\r\n    const topMessage = parseFloat(imgElm.style.top) + 80;\r\n    loadingText.style.top = `${topMessage}px`;\r\n    const leftImg = parseFloat(imgElm.style.left) + imgElm.width / 2;\r\n    loadingText.style.left = `${leftImg}px`;\r\n    loadingText.style.transform = 'translate(-50%, -50%)';\r\n    loadingText.style.background = 'white';\r\n    loadingText.style.zIndex = '1000';\r\n    loadingText.innerHTML = self.nls.warningExecute;\r\n\r\n    dojo.query(\"#dojox_widget_Standby_0\")[0].appendChild(loadingText);\r\n  },\r\n\r\n  _removeWarningMessageExecute() {\r\n    dojo.query(\"#loadingTextCustom\")[0].remove();\r\n  },\r\n\r\n  _executeIndependenceLands(evt) {\r\n    if (!selfCm.currentLotsRows) {\r\n      selfCm._showMessage(selfCm.nls.emptyLotRequests, type = \"error\")\r\n      return\r\n    }\r\n    if (!LandAssignment.checkPointLotsSelected()) {\r\n      selfCm._showMessage(selfCm.nls.emptyWaySelectedIndependence, type = \"error\")\r\n      return\r\n    }\r\n    selfCm._showMessageConfirm().then(function (result) {\r\n      if (result) {\r\n        selfCm.busyIndicator.show();\r\n        selfCm._addWarningMessageExecute();\r\n        Independence.codRequest = selfCm.codRequestsCm;\r\n        Independence.cadastralBlockUrl = selfCm.layersMap.getLayerInfoById(idLyrCfManzana).getUrl();\r\n        Independence.ubigeo = paramsApp['ubigeo'];\r\n        Independence.user = paramsApp['username'];\r\n        Independence.newLands = LandAssignment.lands;\r\n        Independence.urlLands = selfCm.layersMap.getLayerInfoById(idLyrCfPredios).getUrl();\r\n        Independence.matrixLand = selfCm.currentLandTabRows;\r\n        Independence.config = selfCm.config;\r\n        Independence.currentLotsRows = selfCm.currentLotsRows;\r\n        Independence.caseRequest = selfCm.case;\r\n\r\n        Independence.executeIndependence()\r\n          .then(response => {\r\n            LandAssignment.removeAllGraphics();\r\n            selfCm._refreshLayersCF();\r\n            // selfCm.map.getLayer(idLyrCatastroFiscal).setVisibility(false)\r\n            // selfCm.map.getLayer(idLyrCatastroFiscal).setVisibility(true)\r\n            selfCm._FormResult(selfCm.codRequestsCm, selfCm.caseDescription);\r\n            selfCm.busyIndicator.hide();\r\n            selfCm._removeWarningMessageExecute();\r\n            selfCm._showMessage(selfCm.nls.successProcess, type = \"success\");\r\n          })\r\n          .catch(error => {\r\n            selfCm._removeWarningMessageExecute();\r\n            selfCm._showMessage(error.message, type = \"error\");\r\n            selfCm.busyIndicator.hide();\r\n          })\r\n          .finally(() => {\r\n            selfCm.currentLotsRows = null;\r\n          })\r\n      }\r\n      else {\r\n        return\r\n      }\r\n    })\r\n  },\r\n\r\n  _executeGPService(url, params) {\r\n    let urlStatusRequest = `${selfCm.config.applicationListUrl}/${selfCm.codRequestsCm}`\r\n    selfCm._callApiRestServices(urlStatusRequest, {}).then(function (result) {\r\n      try {\r\n        if (result.idStatus != 1) {\r\n          throw new Error(`Esta solicitud (${selfCm.codRequestsCm}) ya fue procesada con anterioridad: ${result.date}`)\r\n        }\r\n        selfCm.busyIndicator.show();\r\n        // Agregar un elemento de texto debajo del BusyIndicator\r\n        let buzyElm = dojo.query(\"#dojox_widget_Standby_0\")[0]\r\n        let imgElm = buzyElm.querySelector(\"img\")\r\n        let loadingText = document.createElement('div');\r\n        loadingText.id = 'loadingTextCustom';\r\n        loadingText.style.position = 'absolute';\r\n        let topMessage = parseFloat(imgElm.style.top) + 80;\r\n        loadingText.style.top = `${topMessage}px`;\r\n        let leftImg = parseFloat(imgElm.style.left) + imgElm.width / 2;\r\n        loadingText.style.left = `${leftImg}px`;\r\n        loadingText.style.transform = 'translate(-50%, -50%)';\r\n        loadingText.style.background = 'white';\r\n        loadingText.style.zIndex = '1000';\r\n\r\n        dojo.query(\"#dojox_widget_Standby_0\")[0].appendChild(loadingText);\r\n        // selfCm._FormResult(selfCm.codRequestsCm, selfCm.caseDescription);\r\n        selfCm.gp = new Geoprocessor(url);\r\n        selfCm.gp.submitJob(params, selfCm._completeCallback, selfCm._statusCallback);\r\n      } catch (error) {\r\n        selfCm.busyIndicator.hide();\r\n        selfCm._showMessage(error.message, type = \"error\")\r\n      }\r\n\r\n    })\r\n  },\r\n\r\n  _statusCallback(JobInfo) {\r\n    selfCm.jobId = JobInfo.jobId\r\n    let textMessage = JobInfo.messages.map((message) => { return message.description })\r\n    try {\r\n      dojo.query(\"#loadingTextCustom\")[0].textContent = textMessage.slice(-1)[0] ? textMessage.slice(-1)[0] : ''\r\n    } catch (error) {\r\n      console.log(error)\r\n    }\r\n  },\r\n  _completeCallback(JobInfo) {\r\n    switch (JobInfo.jobStatus) {\r\n      case \"esriJobSubmitted\":\r\n        // El trabajo se ha enviado al servidor y está esperando en la cola.\r\n        console.log(\"El trabajo se ha enviado y está esperando en la cola.\");\r\n        break;\r\n      case \"esriJobExecuting\":\r\n        // El trabajo se está ejecutando actualmente en el servidor.\r\n        console.log(\"El trabajo se está ejecutando en el servidor.\");\r\n        break;\r\n      case \"esriJobSucceeded\":\r\n        // El trabajo se ha completado satisfactoriamente y los resultados están disponibles.\r\n        selfCm.gp.getResultData(JobInfo.jobId, \"response\", function (result) {\r\n          if (!result.value.status) {\r\n            selfCm.busyIndicator.hide();\r\n            selfCm._showMessage(result.value.message, type = \"error\");\r\n            return\r\n          }\r\n\r\n          selfCm._sendDataToPlatform(result.value.response)\r\n\r\n\r\n          switch (selfCm.case) {\r\n            case \"1\":\r\n              selfCm._removeLayerGraphic(idGraphicPredioCm);\r\n              break;\r\n            case \"2\":\r\n              selfCm._removeLayerGraphic(idGraphicPredioCm);\r\n              selfCm._removeLayerGraphic(idGraphicLoteCm);\r\n              selfCm._removeLayerGraphic(idGraphicPuntoLote);\r\n              selfCm._removeLayerGraphic(idGraphicFrenteLote);\r\n              selfCm._removeLayerGraphic(idGraphicLabelCodLote);\r\n              break\r\n            case \"3\":\r\n              graphicLayerPredioByDivison.clear();\r\n              graphicLayerLineaDivision.clear();\r\n              graphicLayerLabelLineaDivision.clear();\r\n              // selfCm._removeLayerGraphic(idGraphicPredioCm);\r\n              selfCm._removeLayerGraphic(idGraphicLoteCm);\r\n              selfCm._removeLayerGraphic(idGraphicPuntoLote);\r\n              selfCm._removeLayerGraphic(idGraphicFrenteLote);\r\n              selfCm._removeLayerGraphic(idGraphicLabelCodLote);\r\n              break\r\n            case \"4\":\r\n              // dojo.query(\".tablinksCm.active\")[0].click();\r\n              selfCm._loadIniRequestsCm()\r\n              break\r\n            default:\r\n              break;\r\n          }\r\n          selfCm.map.getLayer(idLyrCatastroFiscal).setVisibility(false)\r\n          selfCm.map.getLayer(idLyrCatastroFiscal).setVisibility(true)\r\n          if (selfCm.case == \"4\") {\r\n            dojo.query(\".backTrayClsCm\")[0].click()\r\n          } else {\r\n            selfCm._FormResult(selfCm.codRequestsCm, selfCm.caseDescription);\r\n          }\r\n          // Codigo para mostrar la ventana de resultados\r\n\r\n\r\n        })\r\n        break;\r\n      case \"esriJobFailed\":\r\n        // El trabajo ha fallado y no se han podido generar los resultados.\r\n        selfCm._showMessage(\"El proceso ha fallado y no se han podido generar los resultados.\", type = \"error\");\r\n        break;\r\n      case \"esriJobCancelled\":\r\n        // El trabajo ha sido cancelado por el usuario.\r\n        selfCm._showMessage(\"El proceso ha sido cancelado por el usuario.\");\r\n        break;\r\n      case \"esriJobTimedOut\":\r\n        // El trabajo ha expirado debido a un tiempo de espera.\r\n        selfCm._showMessage(\"El proceso ha superado el tiempo de espera necesario para su ejecución.\", type = \"error\");\r\n        break;\r\n      default:\r\n        // El estado del trabajo no se reconoce.\r\n        selfCm._showMessage(\"El estado del proceso no se reconoce.\");\r\n        break;\r\n    }\r\n    selfCm.busyIndicator.hide();\r\n    // remove 'loadingTextCustom'\r\n    dojo.query(\"#loadingTextCustom\")[0].remove();\r\n  },\r\n  // _cancelProcess(evt) {\r\n  //   selfCm.gp.cancelJob(selfCm.jobId, function (info) {\r\n  //     console.log(info.jobStatus)\r\n  //   });\r\n  // },\r\n\r\n  // _sendDataToPlatform(data) {\r\n  //   for (let predio of data.results) {\r\n  //     predio['ubigeo'] = paramsApp.ubigeo;\r\n  //   }\r\n\r\n  //   data['idType'] = parseInt(selfCm.case)\r\n  //   fetch(selfCm.config.updateStatusApplication, {\r\n  //     method: 'POST', // o 'PUT'\r\n  //     body: JSON.stringify(data), // los datos pueden ser de tipo 'string' o {object}\r\n  //     headers: {\r\n  //       'Content-Type': 'application/json'\r\n  //     }\r\n  //   }).then(res => res.json())\r\n  //     .then(response => selfCm._showMessage('El proceso se completó satisfactoriamente.'))\r\n  //     // .catch(error => console.error('Error:', error));\r\n  //     .catch(error => selfCm._showMessage(error, type = \"error\"));\r\n  // },\r\n\r\n  _exportTableToExcel(evt) {\r\n    // Obtén la tabla HTML\r\n    const table = dojo.query(\"#tableRequestCm\")[0]\r\n    let headerRow = table.querySelector(\"tr\");\r\n    let rows = table.querySelectorAll(\"tr\")\r\n\r\n    let headers = [];\r\n    let headerCols = headerRow.querySelectorAll(\"th\");\r\n    for (let h = 0; h < headerCols.length - 1; h++) {\r\n      headers.push(headerCols[h].innerText);\r\n    }\r\n\r\n    let data = [];\r\n\r\n    // Recorre las filas (ignora la primera fila que contiene los encabezados)\r\n    for (let i = 0; i < rows.length; i++) {\r\n      if (i == 0) continue;\r\n      let row = {}, cols = rows[i].querySelectorAll(\"td\");\r\n\r\n      // Recorre las columnas\r\n      for (let j = 0; j < cols.length - 1; j++) {\r\n        // Usa el texto del encabezado como clave y el texto de la celda como valor\r\n        row[headers[j]] = cols[j].innerText;\r\n      }\r\n\r\n      data.push(row);\r\n    }\r\n\r\n\r\n\r\n    // Convierte el array de objetos en una cadena JSON\r\n    let wb = XLSX.utils.book_new();\r\n\r\n    // Crear una hoja de cálculo a partir de los datos JSON\r\n    let ws = XLSX.utils.json_to_sheet(data);\r\n    let sheetName = selfCm.currentTabActive.replace(\"_\", \" \");\r\n    XLSX.utils.book_append_sheet(wb, ws, sheetName);\r\n\r\n    // Escribir el libro de trabajo y forzar una descarga\r\n    XLSX.writeFile(wb, `reporte_solicitudes_${selfCm.currentTabActive}.xlsx`);\r\n  },\r\n\r\n  _dataURItoBlob(dataURI) {\r\n    var byteString = atob(dataURI.split(',')[1]);\r\n    var mimeString = dataURI.split(',')[0].split(':')[1].split(';')[0];\r\n    var buffer = new ArrayBuffer(byteString.length);\r\n    var dataView = new Uint8Array(buffer);\r\n    for (var i = 0; i < byteString.length; i++) {\r\n      dataView[i] = byteString.charCodeAt(i);\r\n    }\r\n    return new Blob([buffer], { type: mimeString });\r\n  },\r\n\r\n  _sendObservation(evt) {\r\n    selfCm.busyIndicator.show();\r\n    const file = selfCm.imgUploadApCm.files[0];\r\n    const messageObservation = selfCm.textAreaObsApCm.value.trim();\r\n    if (messageObservation == '') {\r\n      selfCm.busyIndicator.hide();\r\n      selfCm._showMessage(selfCm.nls.emptyObservation, type = \"error\");\r\n      return\r\n    }\r\n    if (file == undefined) {\r\n      selfCm.busyIndicator.hide();\r\n      selfCm._showMessage(selfCm.nls.emptyImageSupport, type = \"error\");\r\n      return\r\n    }\r\n    const reader = new FileReader();\r\n    const data = new FormData();\r\n    reader.onloadend = function () {\r\n      data.append('application_id', selfCm.codRequestsCm);\r\n      data.append('description', selfCm.textAreaObsApCm.value);\r\n      data.append('img', selfCm.imgUploadApCm.files[0]);\r\n\r\n      return fetch(selfCm.config.observationUrl, {\r\n        method: 'POST',\r\n        body: data\r\n      })\r\n        .then(response => {\r\n          if (!response.ok) {\r\n            selfCm.busyIndicator.hide();\r\n            throw new Error(`HTTP error! status: ${response.status}`);\r\n          }\r\n          selfCm.busyIndicator.hide();\r\n          selfCm._showMessagePromise(selfCm.nls.successRequestObservation).then((result) => {\r\n            dojo.query(\".backRequestsClsCm\")[0].click();\r\n            dojo.query(\".backTrayClsCm\")[0].click();\r\n            selfCm._loadIniRequestsCm();\r\n          })\r\n\r\n        }).catch(error => {\r\n          selfCm.busyIndicator.hide();\r\n          selfCm._showMessage(`${selfCm.nls.errorProcessRequestObservation} ${error}`, type = \"error\")\r\n        });\r\n    }\r\n    reader.readAsDataURL(file);\r\n  },\r\n\r\n  _uploadImagenObs(evt) {\r\n    let imageDiv = dojo.query(\".thumbnailClsCm\")[0];\r\n    let file = evt.target.files[0];\r\n    let reader = new FileReader();\r\n\r\n    reader.onloadend = function () {\r\n      imageDiv.innerHTML = \"\";\r\n      imageDiv.style.backgroundImage = 'url(' + reader.result + ')';\r\n      imageDiv.style.backgroundSize = 'contain';\r\n      imageDiv.style.backgroundRepeat = 'no-repeat';\r\n      imageDiv.style.backgroundPosition = 'center';\r\n    }\r\n\r\n    if (file) {\r\n      reader.readAsDataURL(file);\r\n    } else {\r\n      imageDiv.innerHTML = \"<span><i class='far fa-image'></i></span>\";\r\n    }\r\n  },\r\n  _searchRequestByCodPred(evt) {\r\n    if (evt.keyCode === 13) {\r\n      if (evt.target.value == '') {\r\n        if ('cup' in selfCm.queryRequests) {\r\n          delete selfCm.queryRequests['cup'];\r\n        }\r\n      } else {\r\n        selfCm.queryRequests['cup'] = evt.target.value;\r\n        // selfCm.queryRequests.limit = selfCm.defaultLimit;\r\n      }\r\n      dojo.query(\".tablinksCm.active\")[0].click();\r\n    }\r\n  },\r\n\r\n  _sortedByDate(evt) {\r\n    const columnOrder = evt.currentTarget.dataset.val\r\n    evt.currentTarget.dataset.val = columnOrder.includes('-') ? columnOrder.replace('-', '') : `-${columnOrder}`\r\n    selfCm.queryRequests['ordering'] = evt.currentTarget.dataset.val;\r\n    selfCm._loadRequestsCm();\r\n    // dojo.query(\".tablinksCm.active\")[0].click();\r\n  },\r\n\r\n\r\n\r\n  onOpen() {\r\n    // this._createToolbar();\r\n\r\n    dojo.query(\".backTrayClsCm\").on('click', this._openFormCase);\r\n    dojo.query(\".tablinksCm\").on('click', this._loadRequestTabActiveCm);\r\n    dojo.query(\"#btnObsCaseCm\").on('click', this._openFormObs);\r\n    dojo.query(\".backRequestsClsCm\").on('click', this._openFormObs);\r\n    // dojo.query(\"#goodRequestsCm\").on('click', this._openFormResult);\r\n    dojo.query(\"#showInfoDocCm\").on('click', this._openSupportingDocument)\r\n\r\n    // Reasignacion\r\n    dojo.query(\"#btnDrawMarkerCm\").on('click', this._activateTool);\r\n\r\n    dojo.query(\"#btnFsCm\").on('click', this._ApplyAcumulationLotsRefactor)\r\n    dojo.query(\"#btnDrawLinesDvCm\").on('click', this._activateToolLinesDivision)\r\n    dojo.query(\"#btnApplyDvCm\").on('click', this._ApplyDivideLotesRefactor)\r\n    dojo.query(\"#titleCaseCm\").on('click', this._zoomHomeRequests)\r\n    // dojo.query(\"#sendDataRsCm\").on('click', this._executeReasignacionGpService)\r\n    dojo.query('#sendDataFsCm').on('click', this._executeAcumulacionGpService)\r\n    dojo.query('#sendDataDvCm').on('click', this._executeSubdivisionGpService)\r\n    dojo.query('#sendDataDtCm').on('click', this._executeInactivarGpService)\r\n    dojo.query('#btnReportCm').on('click', this._exportTableToExcel)\r\n    dojo.query('#imgUploadCm').on('change', this._uploadImagenObs)\r\n    dojo.query('#sendDataObsGrCm').on('click', this._sendObservation)\r\n    dojo.query('#searchTbxCm').on(\"keyup\", this._searchRequestByCodPred)\r\n    dojo.query('.columnDateClsCm').on(\"click\", this._sortedByDate)\r\n    dojo.query('.selectLimitClsCm').on(\"change\", this._changeLimitPagination)\r\n    dojo.query('.buttonPaginationPrevClsCm').on(\"click\", this._prevPagePagination)\r\n    dojo.query('.buttonPaginationNextClsCm').on(\"click\", this._nextPagePagination)\r\n\r\n    // dojo.query('.columnCaseClsCm').on(\"click\", this._sortedByDate)\r\n    this._loadIniRequestsCm()\r\n\r\n    selfCm.map.addLayer(graphicLayerLabelLineaDivision)\r\n    // selfCm.map.addLayer(graphicLayerLandsByIndependence)\r\n    selfCm.editToolbar = new Edit(selfCm.map);\r\n    // selfCm.map.on(\"click\", selfCm._enableEditingLabelsLotesDivision);\r\n    selfCm.editToolbar.on(\"deactivate\", function (evt) {\r\n      if (evt.info.isModified) {\r\n        selfCm.map.setInfoWindowOnClick(true)\r\n        // firePerimeterFL.applyEdits(null, [evt.graphic], null);\r\n      }\r\n    });\r\n  },\r\n\r\n  // this.toolDraw.map = this.map;\r\n\r\n  // onClose(){\r\n  //   console.log('CartoMaintenanceWgt::onClose');\r\n  // },\r\n  // onMinimize(){\r\n  //   console.log('CartoMaintenanceWgt::onMinimize');\r\n  // },\r\n  // onMaximize(){\r\n  //   console.log('CartoMaintenanceWgt::onMaximize');\r\n  // },\r\n  // onSignIn(credential){\r\n  //   console.log('CartoMaintenanceWgt::onSignIn', credential);\r\n  // },\r\n  // onSignOut(){\r\n  //   console.log('CartoMaintenanceWgt::onSignOut');\r\n  // }\r\n  // onPositionChange(){\r\n  //   console.log('CartoMaintenanceWgt::onPositionChange');\r\n  // },\r\n  // resize(){\r\n  //   console.log('CartoMaintenanceWgt::resize');\r\n  // }\r\n});\r\n"]}