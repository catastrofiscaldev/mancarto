{"version":3,"sources":["../../../../widgets/CartoMaintenanceWgt/case/Subdivision.js"],"names":["define","UtilityCase","SubDivision","codRequest","currentLotsRows","currentPoinLotsRows","currentLandsRows","newPointLotsGraphics","newLandsGraphics","attributes","pointLotUrl","landUrl","lotUrl","arancelUrl","blockUrl","lotGraphic","cadastralBlockUrl","ubigeo","user","config","lands","pointLots","lots","caseRequest","executeSubdivision","getBlockFromLot","geometry","then","translateFieldsBlockToLot","block","tipLot","calculateTipLot","calculateFieldsOfLot","translateFieldsLotToPointLot","translateFieldsArancelToPointLot","calculateFieldsOfPointLot","translateFieldsPointLotToLand","calculateIdMznC","calculateIdPred","getDataOrigin","results","features","sendDataOriginToHistoric","deleteDataOrigin","addDataNew","updateStatusRequests","codRequests","console","log","catch","err"],"mappings":"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","file":"Subdivision.js","sourcesContent":["define([\r\n    \"./UtilityCase\",\r\n], function (\r\n    UtilityCase,\r\n) {\r\n    /*\r\n    * @description: Objeto que contiene las funciones para la subdivisión de lotes\r\n    */\r\n    const SubDivision = {\r\n        codRequest: null, // @params: Código de la solicitud\r\n        // currentLots: null, // @param: Lotes actuales a modificar\r\n        currentLotsRows: null, // @calculate []: Features de los lotes actuales\r\n        currentPoinLotsRows: null, // @calculate: Features de los puntos de los lotes actuales\r\n        currentLandsRows: null, // @calculate: Features de los predios actuales\r\n        // newPointLots: null, // @param: nuevos puntos lote\r\n        newPointLotsGraphics: null, // @params: nuevos puntos lote como graficos\r\n        newLandsGraphics: null, // @params: nuevos predios como graficos\r\n        attributes: null, // @param: \r\n        pointLotUrl: null, // @param\r\n        landUrl: null, // @param\r\n        lotUrl: null, // @param\r\n        arancelUrl: null, // @param\r\n        blockUrl: null, // @param\r\n        lotGraphic: null, // @param\r\n        cadastralBlockUrl: null, // @param\r\n        ubigeo: null, // @param\r\n        user: null, // @param\r\n        // geometryLand: null, // @param []: coodernadas x,y de los predios resultantes\r\n        config: null, // @param\r\n\r\n        lands: null, // @calculate\r\n        pointLots: [], // @calculate array\r\n        lots: null, // @calculate\r\n        // block: null, // @calculate\r\n        // LandCls: new UtilityCase.Land(),\r\n        // LotCls: new UtilityCase.Lot(),\r\n        // PointLotCls: new UtilityCase.PointLot(),\r\n        caseRequest: null, // @param\r\n\r\n        executeSubdivision() {\r\n            return UtilityCase.getBlockFromLot(this.currentLotsRows[0].geometry, this.blockUrl)\r\n                .then(block => UtilityCase.translateFieldsBlockToLot(this.lotUrl, block, this.lotGraphic))\r\n                .then(lots => {\r\n                    const tipLot = UtilityCase.calculateTipLot(this.currentLotsRows);\r\n                    return UtilityCase.calculateFieldsOfLot(\r\n                        this.lotUrl,\r\n                        lots,\r\n                        this.ubigeo,\r\n                        this.codRequest,\r\n                        this.user,\r\n                        this.attributes,\r\n                        tipLot\r\n                    )\r\n                })\r\n                .then(lots => {\r\n                    this.lots = lots;\r\n                    return UtilityCase.translateFieldsLotToPointLot(lots, this.pointLotUrl, this.newPointLotsGraphics)\r\n                })\r\n                .then(pointLots => UtilityCase.translateFieldsArancelToPointLot(pointLots, this.arancelUrl))\r\n                .then(pointLots => UtilityCase.calculateFieldsOfPointLot(this.pointLotUrl, this.ubigeo, pointLots))\r\n                .then(pointLots => {\r\n                    this.pointLots = pointLots;\r\n                    return UtilityCase.translateFieldsPointLotToLand(pointLots, this.landUrl, this.newLandsGraphics)\r\n                })\r\n                .then(lands => UtilityCase.calculateIdMznC(lands, this.cadastralBlockUrl, this.ubigeo))\r\n                .then(lands => UtilityCase.calculateIdPred(lands, this.landUrl, this.ubigeo))\r\n                .then(lands => {\r\n                    this.lands = lands;\r\n                    return UtilityCase.getDataOrigin(this.pointLotUrl, this.landUrl, this.currentLotsRows[0])\r\n                })\r\n                .then(results => {\r\n                    this.currentPoinLotsRows = results[0].features;\r\n                    this.currentLandsRows = results[1].features;\r\n                    return UtilityCase.sendDataOriginToHistoric(this.config, this.currentLotsRows, this.currentPoinLotsRows, this.currentLandsRows)\r\n                })\r\n                .then(results => UtilityCase.deleteDataOrigin(this.currentLotsRows, this.currentPoinLotsRows, this.currentLandsRows, this.config))\r\n                .then(results => UtilityCase.addDataNew(this.lots, this.pointLots, this.lands, this.config))\r\n                .then(results => UtilityCase.updateStatusRequests(this.lands, this.codRequests, this.caseRequest, this.ubigeo, this.config))\r\n                .then(results => console.log(results))\r\n                .catch(err => console.log(err));\r\n        },\r\n    };\r\n    return SubDivision;\r\n});"]}