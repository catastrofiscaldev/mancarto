{"version":3,"sources":["../../../../widgets/CartoMaintenanceWgt/case/Acumulation.js"],"names":["define","UtilityCase","Acumulation","codRequests","currentLotsRows","currentPoinLotsRows","currentLandsRows","newPointLotsGraphics","newLandsGraphics","attributes","pointLotUrl","landUrl","lotUrl","arancelUrl","blockUrl","lotGraphic","cadastralBlockUrl","ubigeo","user","config","caseRequest","lands","pointLots","lots","queryBlock","executeAcumulation","getBlockFromLot","geometry","then","checkExistLotUrban","block","translateFieldsBlockToLot","tipLot","calculateTipLot","calculateFieldsOfLot","codRequest","translateFieldsLotToPointLot","translateFieldsArancelToPointLot","calculateFieldsOfPointLot","translateFieldsPointLotToLand","calculateIdMznC","calculateIdPred","getDataOrigin","results","features","sendDataOriginToHistoric","deleteDataOrigin","addDataNew","updateStatusRequests","console","log","catch","err"],"mappings":"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","file":"Acumulation.js","sourcesContent":["define([\r\n    \"./UtilityCase\",\r\n], function (\r\n    UtilityCase,\r\n) {\r\n    /*\r\n    * @description: Objeto que contiene las funciones para la acumulaciÃ³n de lotes\r\n    */\r\n    const Acumulation = {\r\n\r\n        codRequests: null, // @param\r\n        // currentLots: null, // @param\r\n        currentLotsRows: null,\r\n        currentPoinLotsRows: null,\r\n        currentLandsRows: null,\r\n        // newPointLots: null, // @param\r\n        newPointLotsGraphics: null, // @param\r\n        newLandsGraphics: null, // @params: nuevos predios como graficos\r\n        attributes: null, // @param\r\n        pointLotUrl: null, // @param\r\n        landUrl: null, // @param\r\n        lotUrl: null, // @param\r\n        arancelUrl: null, // @param\r\n        blockUrl: null, // @param\r\n        lotGraphic: null, // @param []: lotes resultantes\r\n        cadastralBlockUrl: null, // @param\r\n        ubigeo: null, // @param\r\n        user: null, // @param\r\n        // geometryLand: null, // @param []: coodernadas x,y de los predios resultantes\r\n        config: null, // @param\r\n        caseRequest: null, // @param\r\n\r\n        lands: [], // @calculate\r\n        pointLots: [], // @calculate array\r\n        lots: null, // @calculate\r\n        // block: null, // @calculate\r\n        // LandCls: new UtilityCase.Land(),\r\n        // LotCls: new UtilityCase.Lot(),\r\n        // PointLotCls: new UtilityCase.PointLot(),\r\n\r\n        // codUiValue: 1,\r\n        queryBlock: null, // @param\r\n\r\n        executeAcumulation() {\r\n            return UtilityCase.getBlockFromLot(this.lotGraphic[0].geometry, this.blockUrl)\r\n                .then(block => UtilityCase.checkExistLotUrban(this.attributes, block, this.lotUrl))\r\n                .then(block => UtilityCase.translateFieldsBlockToLot(this.lotUrl, block, this.lotGraphic))\r\n                .then(lots => {\r\n                    const tipLot = UtilityCase.calculateTipLot(this.currentLotsRows);\r\n                    return UtilityCase.calculateFieldsOfLot(\r\n                        this.lotUrl,\r\n                        lots,\r\n                        this.ubigeo,\r\n                        this.codRequest,\r\n                        this.user,\r\n                        this.attributes,\r\n                        tipLot\r\n                    )\r\n                })\r\n                .then(lots => {\r\n                    this.lots = lots;\r\n                    return UtilityCase.translateFieldsLotToPointLot(lots, this.pointLotUrl, this.newPointLotsGraphics)\r\n                })\r\n                .then(pointLots => UtilityCase.translateFieldsArancelToPointLot(pointLots, this.arancelUrl))\r\n                .then(pointLots => UtilityCase.calculateFieldsOfPointLot(this.pointLotUrl, this.ubigeo, pointLots))\r\n                .then(pointLots => {\r\n                    this.pointLots = pointLots;\r\n                    return UtilityCase.translateFieldsPointLotToLand(pointLots, this.landUrl, this.newLandsGraphics)\r\n                })\r\n                .then(lands => UtilityCase.calculateIdMznC(lands, this.cadastralBlockUrl, this.ubigeo))\r\n                .then(lands => UtilityCase.calculateIdPred(lands, this.landUrl, this.ubigeo))\r\n                .then(lands => {\r\n                    this.lands = lands;\r\n                    return UtilityCase.getDataOrigin(this.pointLotUrl, this.landUrl, this.lots[0])\r\n                })\r\n                .then(results => {\r\n                    this.currentPoinLotsRows = results[0].features;\r\n                    this.currentLandsRows = results[1].features;\r\n                    return UtilityCase.sendDataOriginToHistoric(this.config, this.currentLotsRows, this.currentPoinLotsRows, this.currentLandsRows)\r\n                })\r\n                .then(results => UtilityCase.deleteDataOrigin(this.currentLotsRows, this.currentPoinLotsRows, this.currentLandsRows, this.config))\r\n                .then(results => UtilityCase.addDataNew(this.lots, this.pointLots, this.lands, this.config))\r\n                .then(results => UtilityCase.updateStatusRequests(this.lands, this.codRequests, this.caseRequest, this.ubigeo, this.config))\r\n                .then(results => console.log(results))\r\n                .catch(err => { throw err });\r\n        }\r\n    };\r\n\r\n    return Acumulation;\r\n});"]}